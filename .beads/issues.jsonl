{"id":"agent-shepherd-02w","title":"label-workflow-test: Explicit workflow label test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:32:29.143931+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:29.211824+01:00","labels":["ashep-workflow:simple"],"deleted_at":"2026-01-06T04:32:29.211824+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-0ahv","title":"label-workflow-test: HITL label clear test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:58:05.44206+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:58:05.61717+01:00","deleted_at":"2026-01-06T15:58:05.61717+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-0w1z","title":"label-workflow-test: HITL label clear test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:54:01.282418+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:54:01.428767+01:00","deleted_at":"2026-01-06T15:54:01.428767+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-10f9","title":"label-workflow-test: Non-exclusion test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:54:01.520568+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:54:01.558447+01:00","deleted_at":"2026-01-06T15:54:01.558447+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-11b","title":"label-workflow-test: HITL label set test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:32:30.252356+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:30.334657+01:00","labels":["ashep-hitl:approval"],"deleted_at":"2026-01-06T04:32:30.334657+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-157j","title":"label-workflow-test: Default workflow label test","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-06T16:00:25.058446+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T16:00:25.11759+01:00","labels":["ashep-workflow:default"],"deleted_at":"2026-01-06T16:00:25.11759+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"agent-shepherd-1ep","title":"label-workflow-test: Non-exclusion test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:36:26.311435+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:36:26.349023+01:00","deleted_at":"2026-01-06T04:36:26.349023+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-1nnw","title":"label-workflow-test: Phase label set test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:54:00.72693+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:54:00.801376+01:00","labels":["ashep-phase:implement"],"deleted_at":"2026-01-06T15:54:00.801376+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-1pz","title":"label-workflow-test: Phase label remove test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:34:13.83542+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:13.995078+01:00","deleted_at":"2026-01-06T04:34:13.995078+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-1u2","title":"label-workflow-test: Explicit workflow label test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:34:13.273959+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:13.340846+01:00","labels":["ashep-workflow:simple"],"deleted_at":"2026-01-06T04:34:13.340846+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-1w9","title":"test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T03:50:18.388276+01:00","updated_at":"2025-12-19T04:02:51.934268+01:00","deleted_at":"2025-12-19T04:02:51.934268+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-shepherd-1xy","title":"Phase 6: Documentation \u0026 Integration Tests","description":"**Effort:** ~5 hours | **Risk:** Low\n\nUpdate all documentation and write end-to-end tests.\n\n## Tasks\n\n1. Update `docs/policies-config.md` with trigger system documentation\n2. Remove or deprecate old trigger fields from documentation\n3. Update `docs/config-config.md` with workflow and hitl sections\n4. Update `docs/architecture.md` with label system information\n5. Update `README.md` with label usage examples\n6. Update `AGENTS.md` with new label conventions\n7. Write integration tests for full workflow scenarios\n8. Update documentation with migration guide (if needed)\n\n## Files Modified\n- `.agent-shepherd/docs/policies-config.md`\n- `.agent-shepherd/docs/config-config.md`\n- `.agent-shepherd/docs/architecture.md`\n- `.agent-shepherd/README.md`\n- `.agent-shepherd/AGENTS.md`\n- `tests/integration/label-workflow.test.ts` (new file)\n\n## Acceptance Criteria\n- [ ] docs/policies-config.md documents trigger system\n- [ ] Deprecated trigger fields handled in docs\n- [ ] docs/config-config.md documents workflow section\n- [ ] docs/config-config.md documents hitl section\n- [ ] docs/architecture.md shows label-based workflow\n- [ ] README.md has label usage examples\n- [ ] AGENTS.md documents label conventions\n- [ ] Integration tests cover full workflow scenarios\n- [ ] Integration tests cover exclusion control\n- [ ] Integration tests cover invalid workflow handling\n- [ ] All tests passing\n\n## Integration Test Scenarios\n\n### Full Workflow Execution\n```typescript\ndescribe('Label Workflow Integration Tests', () =\u003e {\n  it('should process issue from start to finish with all labels', async () =\u003e {\n    // Create issue with explicit workflow label\n    await bdCreate({\n      title: 'Test feature',\n      type: 'feature',\n      labels: ['ashep-workflow:complex']\n    });\n    \n    // Issue gets picked up by worker\n    const issue = await getReadyIssues().then(issues =\u003e issues[0]);\n    expect(issue.labels).toContain('ashep-workflow:complex');\n    \n    // First phase started\n    await processIssue(issue);\n    const labels = await getIssueLabels(issue.id);\n    expect(labels).toContain('ashep-phase:plan');\n    \n    // Simulate phase completion\n    await applyTransition(issue.id, {\n      type: 'advance',\n      next_phase: 'implement'\n    });\n    const updatedLabels = await getIssueLabels(issue.id);\n    expect(updatedLabels).toContain('ashep-phase:implement');\n    expect(updatedLabels).not.toContain('ashep-phase:plan');\n    \n    // HITL scenario\n    await applyTransition(issue.id, {\n      type: 'block',\n      reason: 'Human approval required'\n    });\n    const hitlLabels = await getIssueLabels(issue.id);\n    expect(hitlLabels).toContain('ashep-hitl:approval');\n    expect(issue.status).toBe('blocked');\n    \n    // Approve and continue\n    await bdUpdate(issue.id, { removeLabel: 'ashep-hitl:approval' });\n    await processIssue(issue);\n    const finalLabels = await getIssueLabels(issue.id);\n    expect(finalLabels).not.toContain('ashep-hitl:approval');\n    expect(finalLabels).toContain('ashep-phase:implement');\n  });\n});\n```\n\n### Exclusion Control\n```typescript\nit('should skip excluded issues', async () =\u003e {\n  // Create excluded issue\n  await bdCreate({\n    title: 'Skip this',\n    type: 'task',\n    labels: ['ashep-excluded']\n  });\n  \n  // Create normal issue\n  await bdCreate({\n    title: 'Process this',\n    type: 'task'\n  });\n  \n  // Worker should only process non-excluded\n  const eligible = await getEligibleIssues();\n  expect(eligible).toHaveLength(1);\n  expect(eligible[0].title).toBe('Process this');\n});\n```\n\n### Invalid Workflow Label\n```typescript\nit('should warn and fall back when configured', async () =\u003e {\n  const issue = await bdCreate({\n    title: 'Test',\n    type: 'task',\n    labels: ['ashep-workflow:nonexistent']\n  });\n  \n  // Should fall back to type matching\n  const policy = policyEngine.matchPolicy(issue);\n  expect(policy).toBe('simple'); // Assuming simple has 'task' in issue_types\n});\n```","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-05T17:09:43.553208+01:00","updated_at":"2026-01-05T17:22:57.675083+01:00","close_reason":"Removed as requested by user","dependencies":[{"issue_id":"agent-shepherd-1xy","depends_on_id":"agent-shepherd-3of","type":"parent-child","created_at":"2026-01-05T17:09:47.147434+01:00","created_by":"daemon"},{"issue_id":"agent-shepherd-1xy","depends_on_id":"agent-shepherd-s4t","type":"blocks","created_at":"2026-01-05T17:10:32.578192+01:00","created_by":"daemon"}],"deleted_at":"2026-01-05T17:22:57.675083+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-20w","title":"2.1 Implement Beads integration (shell commands, issue parsing)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T03:52:09.911686+01:00","updated_at":"2025-12-19T04:02:51.934268+01:00","deleted_at":"2025-12-19T04:02:51.934268+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-shepherd-27x","title":"label-workflow-test: HITL label clear test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:35:54.328573+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:35:54.486324+01:00","deleted_at":"2026-01-06T04:35:54.486324+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-28ts","title":"label-workflow-test: Phase label set test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T16:00:25.328068+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T16:00:25.406207+01:00","labels":["ashep-phase:implement"],"deleted_at":"2026-01-06T16:00:25.406207+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-28x","title":"label-workflow-test: HITL label clear test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:34:53.744448+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:53.899155+01:00","deleted_at":"2026-01-06T04:34:53.899155+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-2b1","title":"label-workflow-test: Default policy test","status":"tombstone","priority":2,"issue_type":"chore","created_at":"2026-01-06T04:34:53.038516+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:53.097649+01:00","deleted_at":"2026-01-06T04:34:53.097649+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"chore"}
{"id":"agent-shepherd-2cu","title":"label-workflow-test: HITL label clear test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:36:26.052349+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:36:26.213642+01:00","deleted_at":"2026-01-06T04:36:26.213642+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-2hs","title":"label-workflow-test: Phase label set test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:24:42.98298+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:28.97253+01:00","deleted_at":"2026-01-06T04:32:28.97253+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-2m6","title":"Update policy-capability-validator.ts for fallback validation","description":"File: .agent-shepherd/src/core/policy-capability-validator.ts\n\nTask: Modify validation to check fallback hierarchy and update error severity\n\nRequired Changes:\n\n1. Add validateFallbackAgent() function:\n```typescript\nfunction validateFallbackAgent(\n  agentId: string,\n  policyName: string,\n  phaseName: string | null,\n  level: 'global' | 'policy' | 'phase'\n): ValidationResult\n```\n\nThis function should:\n- Check if fallback agent exists in agent registry\n- Verify fallback agent is active\n- Return appropriate validation result\n\n2. Modify validateCapability() to check fallback hierarchy:\n   - When no agent has a capability, check if fallback covers it\n   - Check fallback agents at all 3 levels (phase, policy, global)\n   - Change severity: missing capability with valid fallback = info/warning (not error)\n   - Return error if fallback enabled but agent doesn't exist or is inactive\n\n3. Update validatePolicyChain() to show fallback info:\n   - Collect all capabilities using fallback\n   - Display info messages about which capabilities use fallback\n   - Show which fallback agent handles each capability\n\nExample output:\n```\nℹ️  Policy chain validation: Using fallback for 2 capabilities\n   • policies.yaml: default.test: Capability 'testing' handled by fallback agent 'Build Agent'\n   • policies.yaml: default.review: Capability 'review' handled by fallback agent 'Summary Agent'\n```\n\n4. Add new error type for invalid fallback config:\n   - Fallback agent doesn't exist\n   - Fallback agent is inactive\n\nAcceptance Criteria:\n- [ ] validateFallbackAgent() checks agent existence and active status\n- [ ] validateCapability() uses fallback hierarchy\n- [ ] Missing capability with valid fallback = info/warning severity\n- [ ] Invalid fallback config = error severity\n- [ ] Validation passes when fallback covers missing capabilities\n- [ ] Validation errors when fallback agent doesn't exist\n- [ ] Validation errors when fallback agent is inactive\n- [ ] Fallback info displayed in validation output","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T02:43:57.893794+01:00","updated_at":"2026-01-05T03:02:29.925614+01:00","closed_at":"2026-01-05T03:02:29.925614+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-2m6","depends_on_id":"agent-shepherd-uj0","type":"parent-child","created_at":"2026-01-05T02:45:00.515048+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-2qpc","title":"label-workflow-test: Batch label update test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:58:06.306962+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:58:06.418476+01:00","labels":["label2","label3"],"deleted_at":"2026-01-06T15:58:06.418476+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-2xc","title":"label-workflow-test: HITL label set test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:42:30.927075+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:42:31.015543+01:00","labels":["ashep-hitl:approval"],"deleted_at":"2026-01-06T04:42:31.015543+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-308","title":"label-workflow-test: HITL label set test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:36:25.539222+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:36:25.933279+01:00","labels":["ashep-hitl:approval"],"deleted_at":"2026-01-06T04:36:25.933279+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-32d","title":"Phase 5: README Symlink","description":"Create README.md symlink at repo root pointing to .agent-shepherd/README.md for GitHub visibility. Run: cd /Users/tonyhartmann/DevShare/JS/agent-shepherd \u0026\u0026 ln -s .agent-shepherd/README.md README.md \u0026\u0026 git add README.md \u0026\u0026 git commit -m \"Add symlink to README for GitHub visibility\"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T03:19:02.709844+01:00","created_by":"tonyhartmann","updated_at":"2025-12-30T03:33:32.279153+01:00","closed_at":"2025-12-30T03:33:32.279153+01:00","close_reason":"Closed via update","dependencies":[{"issue_id":"agent-shepherd-32d","depends_on_id":"agent-shepherd-7gt","type":"parent-child","created_at":"2025-12-30T03:20:11.717064+01:00","created_by":"daemon"},{"issue_id":"agent-shepherd-32d","depends_on_id":"agent-shepherd-bcr","type":"blocks","created_at":"2025-12-30T03:20:26.958643+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-32q","title":"Update cmdInit() to add fallback to default config","description":"File: .agent-shepherd/src/cli/index.ts\n\nTask: Add fallback section to default config.yaml created by cmdInit()\n\nRequired Changes:\n\n1. Locate cmdInit() function in src/cli/index.ts\n\n2. Update the default config.yaml template to include:\n```yaml\nfallback:\n  enabled: true\n  default_agent: build\n  # Optional: Add mappings for better agent matching\n  # mappings:\n  #   review: summary\n  #   architecture: plan\n```\n\n3. Ensure the fallback section is added at the appropriate place in the YAML (after main config, before worker/monitor sections)\n\n4. Add comment explaining fallback system:\n```yaml\n# Fallback Agent System\n# When a policy requires a capability that no agent has,\n# the system will fall back to the specified agent.\n# This allows quickstart to work with default agents.\nfallback:\n  enabled: true\n  default_agent: build\n```\n\nAcceptance Criteria:\n- [ ] Default config.yaml includes fallback section\n- [ ] fallback.enabled is true\n- [ ] fallback.default_agent is \"build\"\n- [ ] YAML is properly formatted and indented\n- [ ] Comments explain fallback system clearly\n- [ ] Example mappings are commented (not active)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T02:43:57.885505+01:00","updated_at":"2026-01-05T03:09:36.613062+01:00","closed_at":"2026-01-05T03:09:36.613062+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-32q","depends_on_id":"agent-shepherd-uj0","type":"parent-child","created_at":"2026-01-05T02:45:00.520067+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-3br","title":"Update agent-registry.ts for fallback agent selection","description":"File: .agent-shepherd/src/core/agent-registry.ts\n\nTask: Add fallback agent selection and integrate with selectAgent()\n\nRequired Changes:\n\n1. Add getFallbackAgent() function:\n```typescript\nfunction getFallbackAgent(\n  capability: string,\n  policy: Policy,\n  phase: Phase | null\n): Agent | null\n```\n\nImplementation should follow cascading hierarchy:\n1. Phase-level override? Return agent from phase.fallback_agent\n2. Phase disabled? Return null (phase.fallback_enabled === false)\n3. Policy mappings? Return agent from policy.fallback_mappings[capability]\n4. Policy disabled? Return null (policy.fallback_enabled === false)\n5. Global mappings? Return agent from config.fallback.mappings[capability]\n6. Global disabled? Return null (!config.fallback.enabled)\n7. Use policy or global default_agent (policy.fallback_agent || config.fallback.default_agent)\n\n2. Modify selectAgent() to use fallback:\n```typescript\nfunction selectAgent(\n  capability: string,\n  policy: Policy,\n  phase: Phase | null\n): Agent | null {\n  // 1. Try to find agent with capability\n  let agent = getAgentsByCapability(capability);\n  \n  if (!agent) {\n    // 2. No agent has capability - use fallback\n    agent = getFallbackAgent(capability, policy, phase);\n    \n    if (agent) {\n      logger.info(`ℹ️ Using fallback agent '${agent.name}' for capability '${capability}'`);\n    }\n  }\n  \n  return agent;\n}\n```\n\n3. Add logging when fallback is used:\n   - Log which agent is used as fallback\n   - Log which capability triggered fallback\n   - Use logger from logging.ts\n\nAcceptance Criteria:\n- [ ] getFallbackAgent() implements cascading hierarchy correctly\n- [ ] Phase-level overrides policy and global\n- [ ] Policy-level overrides global\n- [ ] fallback_enabled: false disables fallback at that level\n- [ ] config.fallback.enabled: false disables all fallbacks\n- [ ] selectAgent() calls getFallbackAgent() when no agent has capability\n- [ ] Fallback usage is logged\n- [ ] Logs include agent name and capability","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T02:43:57.884526+01:00","updated_at":"2026-01-05T03:08:00.925671+01:00","closed_at":"2026-01-05T03:08:00.925671+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-3br","depends_on_id":"agent-shepherd-uj0","type":"parent-child","created_at":"2026-01-05T02:45:00.518399+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-3ff","title":"label-workflow-test: Full workflow lifecycle test","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-06T04:34:54.182699+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:54.548877+01:00","labels":["ashep-workflow:simple"],"deleted_at":"2026-01-06T04:34:54.548877+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"agent-shepherd-3of","title":"Agent Shepherd Label System - Complete Implementation","description":"## Executive Summary\nThis epic implements four core label-based features to enable comprehensive workflow orchestration using Beads labels:\n\n1. **Trigger System** - Automatic workflow selection via `ashep-workflow:` labels and issue type matching\n2. **Phase Tracking** - Track current phase via `ashep-phase:` labels\n3. **Status/HITL Markers** - Mark human-in-the-loop states via `ashep-hitl:` labels\n4. **Exclusion Control** - Exclude issues via `ashep-excluded` label\n\n**Total Scope:** 5 implementation phases, 13 files modified, ~1500 lines of new code\n\n## Design Decisions\n\n### Label Naming Convention\nAll Agent Shepherd labels use `ashep-` prefix (dash, not colon):\n- `ashep-workflow:\u003cname\u003e` - Explicit workflow assignment\n- `ashep-phase:\u003cname\u003e` - Current workflow phase\n- `ashep-excluded` - Exclusion marker\n- `ashep-hitl:\u003creason\u003e` - Human-in-the-loop state\n\n### Trigger System Design\n**Priority:**\n1. Explicit workflow label (`ashep-workflow:xxx`) → Direct assignment\n2. Issue type matching → Policy with matching `issue_types` array (highest priority wins)\n3. Default policy → Fallback\n\n**Invalid workflow label handling:** Configurable via `config.workflow.invalid_label_strategy` (default: `warning-fallback`)\n\n### HITL Reason Design (Hybrid Approach)\n```yaml\nhitl:\n  allowed_reasons:\n    predefined: [\"approval\", \"manual-intervention\", \"timeout\", \"error\", \"review-request\"]\n    allow_custom: true\n    custom_validation: \"alphanumeric-dash-underscore\"\n```\n\n### Backward Compatibility\n- Remove `excluded_tags` text-based filtering immediately (no migration period)\n\n## Implementation Phases\n\n### Phase 1: Infrastructure - Foundation\nAdd label fetching and management capabilities to Beads integration (~4 hours)\n\n### Phase 2: Schema \u0026 Configuration\nAdd trigger system and HITL configuration to schemas and default config (~3 hours)\n\n### Phase 3: Trigger System\nImplement automatic workflow selection based on labels and issue types (~6 hours)\n\n### Phase 4: Phase \u0026 HITL Tracking\nTrack workflow phases and human-in-the-loop states via labels (~6 hours)\n\n### Phase 5: Exclusion Control\nExclude issues from processing via `ashep-excluded` label (~2 hours)\n\n### Phase 6: Documentation \u0026 Integration Tests\nUpdate all documentation and write end-to-end tests (~5 hours)\n\n## Success Criteria\n\n**Feature 1: Trigger System**\n- [ ] Explicit workflow label (`ashep-workflow:`) takes precedence\n- [ ] Issue type matching works correctly\n- [ ] Priority-based selection works (higher wins)\n- [ ] Config order breaks priority ties correctly\n- [ ] Default policy used when no match\n- [ ] Invalid workflow label handled according to `invalid_label_strategy`\n\n**Feature 2: Phase Tracking**\n- [ ] `ashep-phase:` label added on phase start\n- [ ] `ashep-phase:` label updated on phase transition\n- [ ] `ashep-phase:` label removed on issue close\n- [ ] Issues resume from correct phase label\n\n**Feature 3: HITL Markers**\n- [ ] `ashep-hitl:` label set on approval requirement\n- [ ] HITL reasons validated against predefined list\n- [ ] Custom HITL reasons validated by config rules\n- [ ] Approval note generated with instructions\n\n**Feature 4: Exclusion Control**\n- [ ] Issues with `ashep-excluded` filtered from processing\n- [ ] `excluded_tags` config removed\n- [ ] Text-based filtering removed\n\n## Breaking Changes\n- Removed: `excluded_tags` from WorkerConfig (users must update config)\n- Behavior Change: Issues are now filtered by label, not text content\n- Schema Changes: New required/optional fields in config and policies schemas\n\n## Files Modified Summary\n| File | Lines Changed | Type |\n|------|---------------|------|\n| .agent-shepherd/src/core/beads.ts | +150 | Core |\n| .agent-shepherd/src/core/policy.ts | +100 | Core |\n| .agent-shepherd/src/core/worker-engine.ts | +80 | Core |\n| .agent-shepherd/schemas/config.schema.json | +50 | Schema |\n| .agent-shepherd/schemas/policies.schema.json | +20 | Schema |\n| .agent-shepherd/src/cli/index.ts | +30 | CLI |\n| Documentation files | +410/-40 | Docs |\n| Test files (NEW) | +730 | Tests |\n| **TOTAL** | **+1500/-40** | |\n\n---\n## Scratchpad\n\n**When assigned this epic, consume the overall context and select the next available child issue to work on, rather than working on the epic directly.**\n\n### Complete Implementation Plan\n\nSee full detailed plan with code previews, acceptance criteria, and test strategies in original prompt. The plan includes:\n\n- Detailed task breakdowns for each phase\n- Code snippets and previews\n- Risk assessment and mitigation strategies\n- Testing strategy (unit, integration, manual)\n- Gantt chart for implementation timeline\n\n### Dependencies\n- Phase 1 → Phase 2 → Phase 3 → Phase 4 → Phase 5 → Phase 6 (sequential)\n\n### Estimated Timeline\n5-7 working days for full implementation and testing","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2026-01-05T17:07:38.978906+01:00","updated_at":"2026-01-05T17:22:55.870468+01:00","close_reason":"Removed as requested by user","deleted_at":"2026-01-05T17:22:55.870468+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"epic"}
{"id":"agent-shepherd-3vc","title":"label-workflow-test: Explicit workflow label test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:24:42.760504+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:29.116145+01:00","labels":["ashep-workflow:simple"],"deleted_at":"2026-01-06T04:32:29.116145+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-3vx","title":"label-workflow-test: Full workflow lifecycle test","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-06T04:34:14.664714+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:14.726164+01:00","labels":["ashep-workflow:simple"],"deleted_at":"2026-01-06T04:34:14.726164+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"agent-shepherd-3zeb","title":"label-workflow-test: HITL label clear test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:57:13.38709+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:57:13.545025+01:00","deleted_at":"2026-01-06T15:57:13.545025+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-42l","title":"label-workflow-test: Phase label set test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:36:25.155333+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:36:25.238079+01:00","labels":["ashep-phase:implement"],"deleted_at":"2026-01-06T04:36:25.238079+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-4ar","title":"label-workflow-test: Phase label remove test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:42:30.720544+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:42:30.895358+01:00","deleted_at":"2026-01-06T04:42:30.895358+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-4g1d","title":"label-workflow-test: HITL label read test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:57:13.29905+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:57:13.357868+01:00","labels":["ashep-hitl:manual-intervention"],"deleted_at":"2026-01-06T15:57:13.357868+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-4gx","title":"label-workflow-test: Exclusion toggle test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:34:54.063015+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:54.156162+01:00","deleted_at":"2026-01-06T04:34:54.156162+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-4hu","title":"label-workflow-test: Batch label update test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:32:31.009101+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:31.132231+01:00","labels":["label2","label3"],"deleted_at":"2026-01-06T04:32:31.132231+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-4r0r","title":"label-workflow-test: Phase label read test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:54:00.827821+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:54:00.882529+01:00","labels":["ashep-phase:test"],"deleted_at":"2026-01-06T15:54:00.882529+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-4vs","title":"label-workflow-test: HITL label clear test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:32:30.450542+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:30.607809+01:00","deleted_at":"2026-01-06T04:32:30.607809+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-4ye","title":"Build Agent Shepherd Orchestration System","description":"The current agent ecosystem lacks effective orchestration for multi-step workflows, policy enforcement, and human-in-the-loop coordination. Agent Shepherd fills this gap by providing a production-ready TypeScript/Bun project that orchestrates AI coding agents across Beads issues, using OpenCode as the execution environment, enabling safe, explainable, and autonomous software development.\n\n**Reference Documentation**: See @urls.md for authoritative links to Beads, OpenCode, OpenSpec, BMAD Method, ReactFlow, and architectural inspiration from Steve Yegge's articles on agent autonomy and multi-step development.\n\n- Add full CLI interface with commands for worker, monitor, work, init, install, sync-agents, ui\n- Implement Worker Engine to pull from Beads and launch agents in OpenCode sessions\n- Add Monitor Engine for supervision, timeout detection, and HITL handling\n- Create Policy Engine for workflow phase transitions and retries\n- Build Agent Registry with capability-based agent selection\n- Integrate logging with JSONL and SQLite dual storage like Beads\n- Add OpenCode integration using @opencode-ai/sdk for session management\n- Implement Beads integration via shell commands for issue management\n- Develop minimal ReactFlow-based UI for flow visualization\n- Include installer and init commands with default configs","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T03:50:52.515477+01:00","updated_at":"2025-12-19T04:02:51.934268+01:00","deleted_at":"2025-12-19T04:02:51.934268+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-shepherd-55k","title":"1.4 Initialize git repo if not present","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T03:54:39.905045+01:00","updated_at":"2025-12-19T04:02:51.934268+01:00","deleted_at":"2025-12-19T04:02:51.934268+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-shepherd-5is","title":"Phase 3: Installer Scripts","description":"Create .agent-shepherd/install.sh for macOS/Linux and .agent-shepherd/install.ps1 for Windows. Both support version param (default latest), installation mode choice (hybrid/local), global link choice, cloning to temp dir, backing up/restoring config/plugins, copying installation, storing VERSION file, running bun install, and bun link if global linking requested.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T03:19:09.520945+01:00","created_by":"tonyhartmann","updated_at":"2025-12-30T03:35:38.832938+01:00","closed_at":"2025-12-30T03:35:38.832938+01:00","close_reason":"Closed via update","dependencies":[{"issue_id":"agent-shepherd-5is","depends_on_id":"agent-shepherd-7gt","type":"parent-child","created_at":"2025-12-30T03:20:16.076644+01:00","created_by":"daemon"},{"issue_id":"agent-shepherd-5is","depends_on_id":"agent-shepherd-n9n","type":"blocks","created_at":"2025-12-30T03:20:30.894523+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-5rb","title":"1.1 Create package.json with Bun, TypeScript, dependencies (@opencode-ai/sdk, react, reactflow, etc.)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T03:54:09.00127+01:00","updated_at":"2025-12-19T04:02:51.934268+01:00","deleted_at":"2025-12-19T04:02:51.934268+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-shepherd-5s51","title":"label-workflow-test: Phase label remove test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T16:00:25.523384+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T16:00:25.681048+01:00","deleted_at":"2026-01-06T16:00:25.681048+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-5sv","title":"label-workflow-test: No matching policy test","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2026-01-06T04:32:29.700688+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:29.770604+01:00","deleted_at":"2026-01-06T04:32:29.770604+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"epic"}
{"id":"agent-shepherd-5t8","title":"label-workflow-test: Exclusion test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:34:14.406673+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:14.44422+01:00","labels":["ashep-excluded"],"deleted_at":"2026-01-06T04:34:14.44422+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-5xf9","title":"label-workflow-test: HITL label clear test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T16:00:25.902683+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T16:00:26.06469+01:00","deleted_at":"2026-01-06T16:00:26.06469+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-5ynb","title":"label-workflow-test: Exclusion test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:57:13.59457+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:57:13.642561+01:00","labels":["ashep-excluded"],"deleted_at":"2026-01-06T15:57:13.642561+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-5zm","title":"label-workflow-test: Batch label update test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:34:14.754137+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:14.879187+01:00","labels":["label2","label3"],"deleted_at":"2026-01-06T04:34:14.879187+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-61j","title":"label-workflow-test: Exclusion toggle test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:35:54.65546+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:35:54.752761+01:00","deleted_at":"2026-01-06T04:35:54.752761+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-64h","title":"label-workflow-test: Phase label read test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:34:53.232707+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:53.293245+01:00","labels":["ashep-phase:test"],"deleted_at":"2026-01-06T04:34:53.293245+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-6ae","title":"label-workflow-test: Phase label set test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:35:53.73826+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:35:53.819352+01:00","labels":["ashep-phase:implement"],"deleted_at":"2026-01-06T04:35:53.819352+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-6kv","title":"label-workflow-test: Exclusion toggle test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:36:26.376527+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:36:26.476357+01:00","deleted_at":"2026-01-06T04:36:26.476357+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-6n9","title":"Update policies.schema.json with fallback fields","description":"File: .agent-shepherd/schemas/policies.schema.json\n\nTask: Add fallback fields to policy and phase levels in the policies schema\n\nRequired Changes:\n\n1. Add fallback fields to Policy level:\n   - fallback_enabled (boolean, optional): Whether fallback is enabled for this policy\n   - fallback_agent (string, optional): Fallback agent ID for this policy\n   - fallback_mappings (object, optional): Capability-specific fallback mappings for this policy\n\n2. Add fallback fields to Phase level:\n   - fallback_agent (string, optional): Fallback agent ID override for this phase\n   - fallback_enabled (boolean, optional): Whether fallback is enabled for this phase\n\nSchema Structure for Policy:\n```json\n{\n  \"fallback_enabled\": {\n    \"type\": \"boolean\",\n    \"description\": \"Whether fallback is enabled for this policy. Inherits from global if not set.\"\n  },\n  \"fallback_agent\": {\n    \"type\": \"string\",\n    \"description\": \"Fallback agent ID for this policy. Inherits from global if not set.\"\n  },\n  \"fallback_mappings\": {\n    \"type\": \"object\",\n    \"description\": \"Capability-specific fallback mappings for this policy\",\n    \"additionalProperties\": {\n      \"type\": \"string\"\n    }\n  }\n}\n```\n\nSchema Structure for Phase:\n```json\n{\n  \"fallback_agent\": {\n    \"type\": \"string\",\n    \"description\": \"Fallback agent ID override for this phase\"\n  },\n  \"fallback_enabled\": {\n    \"type\": \"boolean\",\n    \"description\": \"Whether fallback is enabled for this phase. Overrides policy and global settings.\"\n  }\n}\n```\n\nAcceptance Criteria:\n- [ ] Policy-level fallback fields are added and optional\n- [ ] Phase-level fallback fields are added and optional\n- [ ] Schema validates with fallback fields\n- [ ] Schema validates without fallback fields (backward compatibility)\n- [ ] All fields have proper descriptions explaining their behavior","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T02:43:57.856884+01:00","updated_at":"2026-01-05T02:53:05.090909+01:00","closed_at":"2026-01-05T02:53:05.090909+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-6n9","depends_on_id":"agent-shepherd-uj0","type":"parent-child","created_at":"2026-01-05T02:45:00.503606+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-6ti","title":"label-workflow-test: Default workflow label test","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-06T04:34:13.369221+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:13.430159+01:00","labels":["ashep-workflow:default"],"deleted_at":"2026-01-06T04:34:13.430159+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"agent-shepherd-74z","title":"label-workflow-test: HITL label read test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:36:25.961976+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:36:26.022965+01:00","labels":["ashep-hitl:manual-intervention"],"deleted_at":"2026-01-06T04:36:26.022965+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-750","title":"label-workflow-test: HITL label read test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:34:53.65248+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:53.713476+01:00","labels":["ashep-hitl:manual-intervention"],"deleted_at":"2026-01-06T04:34:53.713476+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-7566","title":"label-workflow-test: Exclusion test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T16:00:26.092894+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T16:00:26.135495+01:00","labels":["ashep-excluded"],"deleted_at":"2026-01-06T16:00:26.135495+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-7ag","title":"label-workflow-test: Custom workflow label test","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-06T04:24:42.793001+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:29.096188+01:00","labels":["ashep-workflow:advanced"],"deleted_at":"2026-01-06T04:32:29.096188+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"agent-shepherd-7ax","title":"Update config.schema.json with fallback schema","description":"File: .agent-shepherd/schemas/config.schema.json\n\nTask: Add fallback object schema to the configuration schema\n\nRequired Changes:\n1. Add fallback object to the config schema with the following properties:\n   - enabled (boolean): Master switch for fallback system\n   - default_agent (string): Default fallback agent ID for all capabilities\n   - mappings (object): Optional capability-specific fallback agent mappings\n\n2. Mark the fallback object as optional for backward compatibility (older configs without fallback should still validate)\n\nSchema Structure:\n```json\n{\n  \"type\": \"object\",\n  \"properties\": {\n    \"fallback\": {\n      \"type\": \"object\",\n      \"description\": \"Fallback agent system configuration\",\n      \"properties\": {\n        \"enabled\": {\n          \"type\": \"boolean\",\n          \"description\": \"Master switch for fallback system. If false, no fallback anywhere.\"\n        },\n        \"default_agent\": {\n          \"type\": \"string\",\n          \"description\": \"Default fallback agent ID for all capabilities\"\n        },\n        \"mappings\": {\n          \"type\": \"object\",\n          \"description\": \"Optional capability-specific fallback agent mappings\",\n          \"additionalProperties\": {\n            \"type\": \"string\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nAcceptance Criteria:\n- [ ] Schema validates correctly with fallback section\n- [ ] Schema validates correctly without fallback section (backward compatibility)\n- [ ] All fallback properties have proper types and descriptions\n- [ ] Mappings object allows string values (agent IDs)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T02:43:57.844618+01:00","updated_at":"2026-01-05T02:53:05.089726+01:00","closed_at":"2026-01-05T02:53:05.089726+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-7ax","depends_on_id":"agent-shepherd-uj0","type":"parent-child","created_at":"2026-01-05T02:45:00.501564+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-7bq","title":"label-workflow-test: HITL label read test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:42:31.045855+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:42:31.11021+01:00","labels":["ashep-hitl:manual-intervention"],"deleted_at":"2026-01-06T04:42:31.11021+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-7eth","title":"label-workflow-test: Explicit workflow label test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T16:00:24.969321+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T16:00:25.029502+01:00","labels":["ashep-workflow:simple"],"deleted_at":"2026-01-06T16:00:25.029502+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-7gt","title":"Agent Shepherd Installation \u0026 Distribution Refactor","description":"Refactor Agent Shepherd's installation and distribution system to support hybrid installations, cross-platform compatibility, and user-friendly installer scripts. This includes creating installer scripts for macOS/Linux and Windows, adding update/version commands, and implementing README symlink for GitHub visibility.","design":"Agent Shepherd - Installation \u0026 Distribution Refactor\nSession Summary\nThe Problem\nAgent Shepherd lives in .agent-shepherd/ by design - when installed in user projects, it should be a clean, self-contained dotfolder that doesn't pollute the user's repo. However, this creates a GitHub visibility problem: the README at .agent-shepherd/README.md is hidden because GitHub only shows READMEs at the repository root.\nWe explored several solutions:\n- Moving everything to repo root (rejected - would conflict with user's files when installed)\n- Two separate repos (rejected - unnecessary complexity)\n- Symlink + smart installer (chosen solution)\nThe Solution\n1. Symlink for GitHub visibility: Create README.md at repo root as a symlink to .agent-shepherd/README.md. GitHub renders symlinked READMEs, so visitors see the full documentation. The symlink is only in the development repo - users never get it.\n2. Smart installer: Instead of users cloning the whole repo, they run an installer script that copies ONLY .agent-shepherd/ to their project. This means:\n   - Users get a clean installation (just the dotfolder)\n   - No README conflict with their own project\n   - No dev files (openspec/, .beads/, etc.) polluting their repo\n3. Hybrid installation model: Users choose between:\n   - Hybrid: Binary in ~/.agent-shepherd/, config per-project in ./.agent-shepherd/config/\n   - Local: Everything self-contained in ./.agent-shepherd/\n4. Command linking options: Users choose whether to:\n   - Global link: ashep command available everywhere (convenient, single version)\n   - No link: Run via bunx ashep or explicit path (supports multiple versions)\n5. Versioning via GitHub releases: Tags like v1.0.0 enable:\n   - Installing specific versions\n   - ashep update / ashep update v1.2.0 for upgrades/downgrades\n   - Version tracking in ~/.agent-shepherd/VERSION\n6. Cross-platform support: Two installers (bash + PowerShell) plus fixes to the codebase to replace Unix-specific commands with Node APIs.\nWhy This Approach?\n| Decision | Why |\n|----------|-----|\n| Symlink README | Single source of truth, visible on GitHub, not shipped to users |\n| Installer script | Users get only what they need, clean project |\n| Hybrid option | Shared binary saves disk space, per-project config makes sense |\n| Local option | Self-contained projects that work when cloned |\n| Dual installers | Windows and macOS/Linux have different shells |\n| ashep update | Easy maintenance, version pinning for stability |\nCurrent Windows Compatibility Issues\nThe codebase has Unix-specific commands that break on Windows:\n- cp -r → needs fs.cpSync()\n- rm -rf → needs fs.rmSync()\n- $HOME → needs os.homedir()\n- curl | bash for Beads install → needs OS detection\n---\nImplementation Plan\nPhase 1: Cross-Platform Fixes\nGoal: Make current code work on Windows\nFile: .agent-shepherd/src/cli/index.ts\n1. Add imports:\nimport { cpSync, rmSync } from \"fs\";\nimport { homedir, platform } from \"os\";\n2. Replace shell commands:\n   - Line 667: execSync(\\cp -r ...\\`) → cpSync(source, dest, { recursive: true })`\n   - Line 755: execSync(\\rm -rf ...\\`) → rmSync(path, { recursive: true, force: true })`\n   - Line 792: process.env.HOME → homedir()\n3. OS-aware Beads installation in quickstart:\nif (platform() === \"win32\") {\n  console.log(\"Please install Beads manually: https://get.beads.dev\");\n} else {\n  execSync(\"curl -fsSL https://get.beads.dev | bash\", { stdio: \"inherit\" });\n}\n---\nPhase 2: Hybrid Installation Support\nGoal: Support global install + local config\nFile: .agent-shepherd/src/core/path-utils.ts\nReplace current implementation with:\nimport { existsSync } from \"fs\";\nimport { join, dirname } from \"path\";\nimport { homedir } from \"os\";\nexport function getGlobalInstallDir(): string {\n  return join(homedir(), \".agent-shepherd\");\n}\nexport function findLocalAgentShepherdDir(): string | null {\n  let currentDir = process.cwd();\n  while (true) {\n    const agentShepherdDir = join(currentDir, \".agent-shepherd\");\n    if (existsSync(agentShepherdDir)) {\n      return agentShepherdDir;\n    }\n    const parentDir = dirname(currentDir);\n    if (parentDir === currentDir) break;\n    currentDir = parentDir;\n  }\n  return null;\n}\nexport function findInstallDir(): string {\n  // Check for local full install (has src/)\n  const local = findLocalAgentShepherdDir();\n  if (local \u0026\u0026 existsSync(join(local, \"src\"))) {\n    return local;\n  }\n  // Fall back to global\n  const global = getGlobalInstallDir();\n  if (existsSync(global)) {\n    return global;\n  }\n  throw new Error(\"Agent Shepherd not installed. Run the installer or 'ashep init'\");\n}\nexport function findConfigDir(): string {\n  // Check for local config\n  const local = findLocalAgentShepherdDir();\n  if (local \u0026\u0026 existsSync(join(local, \"config\"))) {\n    return join(local, \"config\");\n  }\n  // Fall back to global config\n  const global = getGlobalInstallDir();\n  const globalConfig = join(global, \"config\");\n  if (existsSync(globalConfig)) {\n    return globalConfig;\n  }\n  throw new Error(\"No configuration found. Run 'ashep init' in your project.\");\n}\nexport function findPluginsDir(): string {\n  const local = findLocalAgentShepherdDir();\n  if (local \u0026\u0026 existsSync(join(local, \"plugins\"))) {\n    return join(local, \"plugins\");\n  }\n  const global = getGlobalInstallDir();\n  return join(global, \"plugins\");\n}\n// Legacy function - backward compatibility\nexport function findAgentShepherdDir(): string {\n  const local = findLocalAgentShepherdDir();\n  if (local) return local;\n  const global = getGlobalInstallDir();\n  if (existsSync(global)) return global;\n  throw new Error(\".agent-shepherd directory not found. Run the installer or 'ashep init'\");\n}\nUpdate files using path-utils:\n- src/core/config.ts\n- src/core/config-validator.ts\n- src/core/agent-registry.ts\n- src/core/policy.ts\n- src/cli/index.ts\n---\nPhase 3: Installer Scripts\nGoal: Create platform-specific installers\nFile: .agent-shepherd/install.sh (macOS/Linux)\n#!/bin/bash\nset -e\nVERSION=\"${1:-latest}\"\nREPO_URL=\"https://github.com/USER/agent-shepherd.git\"\necho \"Agent Shepherd Installer\"\necho \"========================\"\necho \"\"\necho \"1. Where should Agent Shepherd be installed?\"\necho \"\"\necho \"   [H] Hybrid (recommended)\"\necho \"       Binary: ~/.agent-shepherd/\"\necho \"       Config: per-project (./.agent-shepherd/config/)\"\necho \"\"\necho \"   [L] Local (self-contained)\"\necho \"       Everything: ./.agent-shepherd/\"\necho \"\"\nread -p \"\u003e \" INSTALL_MODE\nif [[ \"$INSTALL_MODE\" =~ ^[Ll]$ ]]; then\n  INSTALL_DIR=\"$(pwd)/.agent-shepherd\"\n  echo \"Installing locally to: $INSTALL_DIR\"\nelse\n  INSTALL_DIR=\"$HOME/.agent-shepherd\"\n  echo \"Installing globally to: $INSTALL_DIR\"\nfi\necho \"\"\necho \"2. How do you want to run 'ashep'?\"\necho \"\"\necho \"   [G] Global link (recommended)\"\necho \"       Run 'ashep' from anywhere\"\necho \"\"\necho \"   [N] No global link\"\necho \"       Run via: bunx ashep\"\necho \"\"\nread -p \"\u003e \" LINK_MODE\n# Clone to temp\nTEMP_DIR=$(mktemp -d)\necho \"\"\necho \"Downloading Agent Shepherd${VERSION:+ $VERSION}...\"\nif [ \"$VERSION\" = \"latest\" ]; then\n  git clone --depth 1 \"$REPO_URL\" \"$TEMP_DIR\" 2\u003e/dev/null\nelse\n  git clone --depth 1 --branch \"$VERSION\" \"$REPO_URL\" \"$TEMP_DIR\" 2\u003e/dev/null\nfi\n# Backup existing config/plugins if upgrading\nif [ -d \"$INSTALL_DIR/config\" ]; then\n  echo \"Backing up existing config...\"\n  cp -r \"$INSTALL_DIR/config\" \"$TEMP_DIR/config-backup\"\nfi\nif [ -d \"$INSTALL_DIR/plugins\" ]; then\n  echo \"Backing up existing plugins...\"\n  cp -r \"$INSTALL_DIR/plugins\" \"$TEMP_DIR/plugins-backup\"\nfi\n# Remove old installation (preserve config/plugins/logs)\nif [ -d \"$INSTALL_DIR\" ]; then\n  find \"$INSTALL_DIR\" -mindepth 1 -maxdepth 1 \\\n    ! -name 'config' ! -name 'plugins' ! -name 'logs' \\\n    -exec rm -rf {} +\nfi\n# Copy new installation\nmkdir -p \"$INSTALL_DIR\"\ncp -r \"$TEMP_DIR/.agent-shepherd/\"* \"$INSTALL_DIR/\"\n# Restore backups\n[ -d \"$TEMP_DIR/config-backup\" ] \u0026\u0026 cp -r \"$TEMP_DIR/config-backup\" \"$INSTALL_DIR/config\"\n[ -d \"$TEMP_DIR/plugins-backup\" ] \u0026\u0026 cp -r \"$TEMP_DIR/plugins-backup\" \"$INSTALL_DIR/plugins\"\n# Store version\necho \"$VERSION\" \u003e \"$INSTALL_DIR/VERSION\"\n# Install dependencies\necho \"Installing dependencies...\"\ncd \"$INSTALL_DIR\"\nbun install\n# Link globally if requested\nif [[ \"$LINK_MODE\" =~ ^[Gg]$ ]]; then\n  echo \"Linking ashep command globally...\"\n  bun link\nfi\n# Cleanup\nrm -rf \"$TEMP_DIR\"\necho \"\"\necho \"✅ Agent Shepherd installed!\"\necho \"\"\nif [[ ! \"$INSTALL_MODE\" =~ ^[Ll]$ ]]; then\n  echo \"Run 'ashep init' in your project to create local config.\"\nfi\nFile: .agent-shepherd/install.ps1 (Windows)\nSimilar logic in PowerShell syntax (see full implementation plan above).\n---\nPhase 4: Update \u0026 Version Commands\nGoal: Add ashep update and ashep version\nFile: .agent-shepherd/src/cli/index.ts\nAdd to COMMANDS:\nconst COMMANDS: Record\u003cstring, string\u003e = {\n  // ... existing\n  update: \"Update Agent Shepherd to latest or specific version\",\n  version: \"Show installed version\",\n};\nAdd functions:\n- cmdUpdate(version?: string) - Downloads new version, preserves config/plugins, reinstalls\n- cmdVersion() - Reads VERSION file or package.json version\n- getCurrentVersion() - Helper to get current version\nAdd to switch statement:\ncase \"update\":\n  await cmdUpdate(args[1]);\n  break;\ncase \"version\":\n  cmdVersion();\n  break;\n---\nPhase 5: README Symlink\nGoal: GitHub shows README on repo landing page\ncd /Users/tonyhartmann/DevShare/JS/agent-shepherd\nln -s .agent-shepherd/README.md README.md\ngit add README.md\ngit commit -m \"Add symlink to README for GitHub visibility\"\n---\nPhase 6: Update ashep init\nGoal: ashep init creates only local config (for hybrid mode)\nModify cmdInit() to always create ./.agent-shepherd/config/ in current directory, regardless of whether global install exists.\n---\nPhase 7: Documentation Updates\nGoal: Update installation docs\nUpdate .agent-shepherd/README.md with new installation instructions:\n- Quick install via curl/irm\n- Hybrid vs Local explanation\n- Update command usage\n- Developer setup (git clone for contributors)\n---\nExecution Order\n1. Phase 1 - Cross-platform fixes (unblocks Windows)\n2. Phase 5 - README symlink (quick win for GitHub visibility)\n3. Phase 2 - Hybrid path resolution (core architecture change)\n4. Phase 3 - Installer scripts (user experience)\n5. Phase 4 - Update command (maintenance)\n6. Phase 6 - Update init command (polish)\n7. Phase 7 - Documentation (finalize)","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-30T03:18:55.493804+01:00","created_by":"tonyhartmann","updated_at":"2025-12-30T03:36:50.738061+01:00","closed_at":"2025-12-30T03:36:50.738061+01:00","close_reason":"Closed via update"}
{"id":"agent-shepherd-7ig","title":"label-workflow-test: Non-exclusion test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:34:14.472573+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:14.509106+01:00","deleted_at":"2026-01-06T04:34:14.509106+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-7mx","title":"label-workflow-test: Phase label read test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:35:53.847635+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:35:53.907579+01:00","labels":["ashep-phase:test"],"deleted_at":"2026-01-06T04:35:53.907579+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-7ss","title":"label-workflow-test: Exclusion toggle test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:34:14.536304+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:14.635945+01:00","deleted_at":"2026-01-06T04:34:14.635945+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-7tz","title":"Test Beads Integration","description":"Testing the Beads sync functionality.\n\n- Test converter and sync scripts.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T03:57:33.136202+01:00","updated_at":"2025-12-19T04:02:51.934268+01:00","deleted_at":"2025-12-19T04:02:51.934268+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-shepherd-809u","title":"label-workflow-test: Phase label remove test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:58:05.022249+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:58:05.199937+01:00","deleted_at":"2026-01-06T15:58:05.199937+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-82x","title":"label-workflow-test: Default policy test","status":"tombstone","priority":2,"issue_type":"chore","created_at":"2026-01-06T04:35:53.651465+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:35:53.711481+01:00","deleted_at":"2026-01-06T04:35:53.711481+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"chore"}
{"id":"agent-shepherd-834","title":"Phase 1: Infrastructure - Foundation","description":"**Effort:** ~4 hours | **Risk:** Low\n\nAdd label fetching and management capabilities to Beads integration.\n\n## Tasks\n\n1. Update BeadsIssue interface to include `labels?: string[]` field\n2. Implement `getIssueLabels(issueId: string)` function\n3. Implement `updateIssueLabels(issueId, addLabels, removeLabels)` function\n4. Implement `addIssueLabel(issueId, label)` helper\n5. Implement `removeIssueLabel(issueId, label)` helper\n6. Update `getIssue()` to include labels in returned object\n7. Update `getReadyIssues()` to include labels for all issues\n8. Write unit tests for all label functions\n\n## Files Modified\n- `.agent-shepherd/src/core/beads.ts`\n- `tests/beads-labels.test.ts` (new file)\n\n## Acceptance Criteria\n- [ ] BeadsIssue.labels field exists in interface\n- [ ] getIssueLabels() returns array of label strings\n- [ ] updateIssueLabels() adds and removes labels correctly\n- [ ] getIssue() includes labels in returned object\n- [ ] getReadyIssues() includes labels for all issues\n- [ ] All label functions handle errors gracefully\n- [ ] Unit tests cover all label functions\n\n## Code Preview\n```typescript\n// Add to BeadsIssue interface\nexport interface BeadsIssue {\n  id: string;\n  title: string;\n  description: string;\n  status: \"open\" | \"in_progress\" | \"blocked\" | \"closed\";\n  priority: number;\n  issue_type: string;\n  labels?: string[];  // NEW\n  created_at: string;\n  updated_at: string;\n  dependency_count?: number;\n  dependent_count?: number;\n}\n\nasync function getIssueLabels(issueId: string): Promise\u003cstring[]\u003e {\n  try {\n    const proc = Bun.spawn([\"bd\", \"list\", \"--labels\", \"--json\"], {\n      stdout: \"pipe\",\n      stderr: \"pipe\",\n    });\n    \n    const output = await new Response(proc.stdout).text();\n    const exitCode = await proc.exited;\n    \n    if (exitCode !== 0) {\n      return [];\n    }\n    \n    const allLabels = JSON.parse(output);\n    const issueLabels = allLabels.filter((l: any) =\u003e l.issue_id === issueId);\n    return issueLabels.map((l: any) =\u003e l.label);\n  } catch (error) {\n    console.error(`Failed to fetch labels for ${issueId}:`, error);\n    return [];\n  }\n}\n```","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-05T17:08:05.690307+01:00","updated_at":"2026-01-05T17:22:58.47874+01:00","close_reason":"Removed as requested by user","dependencies":[{"issue_id":"agent-shepherd-834","depends_on_id":"agent-shepherd-3of","type":"parent-child","created_at":"2026-01-05T17:08:09.143963+01:00","created_by":"daemon"}],"deleted_at":"2026-01-05T17:22:58.47874+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-85a4","title":"label-workflow-test: Exclusion test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:58:05.650715+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:58:05.692596+01:00","labels":["ashep-excluded"],"deleted_at":"2026-01-06T15:58:05.692596+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-88r","title":"label-workflow-test: Empty label ops test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:42:32.220922+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:42:32.323705+01:00","deleted_at":"2026-01-06T04:42:32.323705+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-8de","title":"2. Core Modules","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T03:51:59.601223+01:00","updated_at":"2025-12-19T04:02:51.934268+01:00","deleted_at":"2025-12-19T04:02:51.934268+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-shepherd-8drw","title":"label-workflow-test: Explicit workflow label test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:58:04.461357+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:58:04.521988+01:00","labels":["ashep-workflow:simple"],"deleted_at":"2026-01-06T15:58:04.521988+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-8m7","title":"label-workflow-test: Exclusion test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:35:54.517052+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:35:54.558506+01:00","labels":["ashep-excluded"],"deleted_at":"2026-01-06T04:35:54.558506+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-927","title":"label-workflow-test: Phase label set test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:32:29.80143+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:29.883902+01:00","labels":["ashep-phase:implement"],"deleted_at":"2026-01-06T04:32:29.883902+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-94r1","title":"label-workflow-test: Phase label read test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:58:04.923762+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:58:04.989858+01:00","labels":["ashep-phase:test"],"deleted_at":"2026-01-06T15:58:04.989858+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-9sg","title":"1. Project Setup","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T03:51:08.036964+01:00","updated_at":"2025-12-19T04:02:51.934268+01:00","deleted_at":"2025-12-19T04:02:51.934268+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-shepherd-9t5","title":"Update policy.ts to parse fallback fields","description":"File: .agent-shepherd/src/core/policy.ts\n\nTask: Parse fallback fields when loading policies and handle inheritance logic\n\nRequired Changes:\n\n1. Add TypeScript interfaces for fallback fields:\n```typescript\ninterface PolicyFallbackConfig {\n  fallback_enabled?: boolean;\n  fallback_agent?: string;\n  fallback_mappings?: Record\u003cstring, string\u003e;\n}\n\ninterface PhaseFallbackConfig {\n  fallback_agent?: string;\n  fallback_enabled?: boolean;\n}\n```\n\n2. Add fallback fields to Policy interface:\n```typescript\ninterface Policy {\n  // ... existing properties\n  fallback_enabled?: boolean;\n  fallback_agent?: string;\n  fallback_mappings?: Record\u003cstring, string\u003e;\n}\n```\n\n3. Add fallback fields to Phase interface:\n```typescript\ninterface Phase {\n  // ... existing properties\n  fallback_agent?: string;\n  fallback_enabled?: boolean;\n}\n```\n\n4. Update loadPolicies() to parse fallback fields:\n   - Read fallback fields from policies.yaml\n   - Store in policy and phase objects\n\n5. Implement inheritance logic:\n   - Policy inherits from global config if fallback_enabled not set\n   - Policy inherits from global config if fallback_agent not set\n   - Phase inherits from policy if fallback_enabled not set\n   - Phase can override both policy and global settings\n\nAcceptance Criteria:\n- [ ] Fallback fields load correctly from policies.yaml\n- [ ] TypeScript types match schema structure\n- [ ] Inheritance logic works correctly (phase overrides policy overrides global)\n- [ ] Missing fields are treated as \"inherit from parent\"\n- [ ] Explicit false values disable fallback at that level","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T02:43:57.878681+01:00","updated_at":"2026-01-05T02:53:53.823276+01:00","closed_at":"2026-01-05T02:53:53.823276+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-9t5","depends_on_id":"agent-shepherd-uj0","type":"parent-child","created_at":"2026-01-05T02:45:00.511343+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-9y5","title":"label-workflow-test: Invalid workflow label test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:34:52.950702+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:53.010012+01:00","labels":["ashep-workflow:nonexistent-workflow"],"deleted_at":"2026-01-06T04:34:53.010012+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-a12","title":"label-workflow-test: Phase label set test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:34:53.126255+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:53.205024+01:00","labels":["ashep-phase:implement"],"deleted_at":"2026-01-06T04:34:53.205024+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-a38","title":"label-workflow-test: Phase label read test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:34:13.745264+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:13.805211+01:00","labels":["ashep-phase:test"],"deleted_at":"2026-01-06T04:34:13.805211+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-aeb","title":"label-workflow-test: Invalid workflow label test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:34:13.458871+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:13.519341+01:00","labels":["ashep-workflow:nonexistent-workflow"],"deleted_at":"2026-01-06T04:34:13.519341+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-aym","title":"label-workflow-test: Full workflow lifecycle test","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-06T04:36:26.505516+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:36:26.880055+01:00","labels":["ashep-workflow:simple"],"deleted_at":"2026-01-06T04:36:26.880055+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"agent-shepherd-b12","title":"2.4 Implement Agent Registry (YAML loading, capability matching)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T03:52:40.868957+01:00","updated_at":"2025-12-19T04:02:51.934268+01:00","deleted_at":"2025-12-19T04:02:51.934268+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-shepherd-b8l","title":"label-workflow-test: Feature priority test","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-06T04:32:29.515305+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:29.576462+01:00","deleted_at":"2026-01-06T04:32:29.576462+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"agent-shepherd-ba8","title":"label-workflow-test: Phase label remove test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:32:30.010362+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:30.224373+01:00","deleted_at":"2026-01-06T04:32:30.224373+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-bcr","title":"Phase 1: Cross-Platform Fixes","description":"Make current code work on Windows by replacing Unix-specific commands with Node APIs in .agent-shepherd/src/cli/index.ts: add imports for cpSync, rmSync from fs and homedir, platform from os; replace execSync commands: line 667 cp -r → cpSync with recursive, line 755 rm -rf → rmSync with recursive/force, line 792 $HOME → homedir(); OS-aware Beads install in quickstart: if platform === 'win32' manual install, else curl.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T03:18:59.487435+01:00","created_by":"tonyhartmann","updated_at":"2025-12-30T03:33:23.839211+01:00","closed_at":"2025-12-30T03:33:23.839211+01:00","close_reason":"Closed via update","dependencies":[{"issue_id":"agent-shepherd-bcr","depends_on_id":"agent-shepherd-7gt","type":"parent-child","created_at":"2025-12-30T03:20:09.769594+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-bcze","title":"label-workflow-test: Empty label ops test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:54:02.214301+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:54:02.308351+01:00","deleted_at":"2026-01-06T15:54:02.308351+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-bj9","title":"Phase 2: Schema \u0026 Configuration","description":"**Effort:** ~3 hours | **Risk:** Low\n\nAdd trigger system and HITL configuration to schemas and default config.\n\n## Tasks\n\n1. Update `config.schema.json` with workflow section (invalid_label_strategy field)\n2. Update `config.schema.json` with hitl section (allowed_reasons configuration)\n3. Update `policies.schema.json` with issue_types field\n4. Update `policies.schema.json` with priority field (1-100, default 50)\n5. Remove or deprecate old trigger fields from policies.schema.json\n6. Update `cmdInit()` to add workflow section to default config.yaml\n7. Update `cmdInit()` to add hitl section to default config.yaml\n8. Write config loading tests\n\n## Files Modified\n- `.agent-shepherd/schemas/config.schema.json`\n- `.agent-shepherd/schemas/policies.schema.json`\n- `.agent-shepherd/src/cli/index.ts` (cmdInit function)\n\n## Acceptance Criteria\n- [ ] config.schema.json includes workflow section\n- [ ] config.schema.json includes hitl section\n- [ ] policies.schema.json includes issue_types field\n- [ ] policies.schema.json includes priority field\n- [ ] cmdInit() adds workflow and hitl to default config\n- [ ] Config validation accepts all new fields\n- [ ] Deprecated trigger fields handled appropriately\n\n## Code Preview (config.schema.json)\n```json\n{\n  \"properties\": {\n    \"workflow\": {\n      \"type\": \"object\",\n      \"description\": \"Workflow selection behavior\",\n      \"properties\": {\n        \"invalid_label_strategy\": {\n          \"type\": \"string\",\n          \"enum\": [\"error\", \"warning-fallback\"],\n          \"default\": \"warning-fallback\",\n          \"description\": \"How to handle issues with invalid workflow labels\"\n        }\n      },\n      \"additionalProperties\": false\n    },\n    \"hitl\": {\n      \"type\": \"object\",\n      \"description\": \"Human-in-the-loop configuration\",\n      \"properties\": {\n        \"allowed_reasons\": {\n          \"type\": \"object\",\n          \"description\": \"HITL reason configuration\",\n          \"properties\": {\n            \"predefined\": {\n              \"type\": \"array\",\n              \"items\": { \"type\": \"string\" },\n              \"default\": [\"approval\", \"manual-intervention\", \"timeout\", \"error\", \"review-request\"]\n            },\n            \"allow_custom\": {\n              \"type\": \"boolean\",\n              \"default\": true\n            },\n            \"custom_validation\": {\n              \"type\": \"string\",\n              \"enum\": [\"none\", \"alphanumeric\", \"alphanumeric-dash-underscore\"],\n              \"default\": \"alphanumeric-dash-underscore\"\n            }\n          },\n          \"required\": []\n        }\n      },\n      \"additionalProperties\": false\n    }\n  }\n}\n```\n\n## Code Preview (config.yaml default)\n```yaml\nworkflow:\n  invalid_label_strategy: warning-fallback  # error | warning-fallback\n\nhitl:\n  allowed_reasons:\n    predefined:\n      - approval\n      - manual-intervention\n      - timeout\n      - error\n      - review-request\n    allow_custom: true\n    custom_validation: alphanumeric-dash-underscore\n```","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-05T17:08:20.256736+01:00","updated_at":"2026-01-05T17:22:58.178182+01:00","close_reason":"Removed as requested by user","dependencies":[{"issue_id":"agent-shepherd-bj9","depends_on_id":"agent-shepherd-3of","type":"parent-child","created_at":"2026-01-05T17:08:25.668213+01:00","created_by":"daemon"},{"issue_id":"agent-shepherd-bj9","depends_on_id":"agent-shepherd-834","type":"blocks","created_at":"2026-01-05T17:09:58.803374+01:00","created_by":"daemon"}],"deleted_at":"2026-01-05T17:22:58.178182+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-bjwp","title":"label-workflow-test: HITL label read test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:54:01.183409+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:54:01.255922+01:00","labels":["ashep-hitl:manual-intervention"],"deleted_at":"2026-01-06T15:54:01.255922+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-bo4","title":"label-workflow-test: Full workflow lifecycle test","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-06T04:42:31.629773+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:42:32.027403+01:00","labels":["ashep-workflow:simple"],"deleted_at":"2026-01-06T04:42:32.027403+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"agent-shepherd-br3","title":"label-workflow-test: Phase label read test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:42:30.624927+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:42:30.69365+01:00","labels":["ashep-phase:test"],"deleted_at":"2026-01-06T04:42:30.69365+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-bxn","title":"label-workflow-test: Phase label read test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:24:43.013866+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:28.952539+01:00","deleted_at":"2026-01-06T04:32:28.952539+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-c12","title":"label-workflow-test: Bug issue type test","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2026-01-06T04:32:29.423093+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:29.484961+01:00","deleted_at":"2026-01-06T04:32:29.484961+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"bug"}
{"id":"agent-shepherd-c84","title":"label-workflow-test: HITL label clear test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:24:43.14306+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:28.873938+01:00","deleted_at":"2026-01-06T04:32:28.873938+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-c8r","title":"Update docs/architecture.md with fallback system","description":"File: .agent-shepherd/docs/architecture.md\n\nTask: Explain fallback system in architecture overview and add to diagrams\n\nRequired Changes:\n\n1. Add \"Fallback Agent System\" section to architecture overview\n\n2. Explain how fallback fits into the architecture:\n   - Where fallback is checked (agent-registry.ts)\n   - How it integrates with policy engine\n   - How it affects workflow execution\n\n3. Update or create architecture diagrams to include fallback:\n\nExample diagram:\n```\n┌─────────────────────────────┐\n│   Worker Engine              │\n│   (Issue Processing)         │\n└─────────────┬───────────────┘\n              │\n              v\n┌─────────────────────────────┐\n│   Agent Selection            │\n│   1. Check capability       │\n│   2. No agent? Use fallback │\n│   3. Cascading hierarchy    │\n└─────────────┬───────────────┘\n              │\n              v\n      ┌───────┴────────┐\n      │                │\n┌─────▼─────┐   ┌──────▼──────┐\n│   Agents  │   │   Fallback  │\n│   (Match  │   │   Agent     │\n│   Cap)    │   │   (Config)  │\n└───────────┘   └─────────────┘\n```\n\n4. Document the fallback data flow:\n   - Config loaded from config.yaml\n   - Policy loaded from policies.yaml\n   - Agent selection checks capability → checks fallback\n   - Cascading hierarchy determines final fallback agent\n\n5. Add to component descriptions:\n   - Agent Registry: Handles agent selection and fallback logic\n   - Policy Engine: Defines fallback configuration at policy/phase level\n   - Config: Defines global fallback configuration\n\n6. Add interaction diagrams showing:\n   - How fallback is checked during agent selection\n   - How validation checks fallback agents\n   - How CLI displays fallback information\n\nAcceptance Criteria:\n- [ ] Fallback system section added\n- [ ] Architecture explained clearly\n- [ ] Diagrams include fallback components\n- [ ] Data flow documented\n- [ ] Component descriptions updated\n- [ ] Interaction diagrams included\n- [ ] Diagrams are clear and accurate","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T02:44:34.427815+01:00","updated_at":"2026-01-05T03:26:18.254384+01:00","closed_at":"2026-01-05T03:26:18.254384+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-c8r","depends_on_id":"agent-shepherd-uj0","type":"parent-child","created_at":"2026-01-05T02:45:00.601058+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-ccr","title":"label-workflow-test: Default policy test","status":"tombstone","priority":2,"issue_type":"chore","created_at":"2026-01-06T04:24:42.920297+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:29.012987+01:00","deleted_at":"2026-01-06T04:32:29.012987+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"chore"}
{"id":"agent-shepherd-ck1.1","title":"1. Test Section","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T03:57:55.81101+01:00","updated_at":"2025-12-19T04:02:51.934268+01:00","deleted_at":"2025-12-19T04:02:51.934268+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-shepherd-ck1.1.1","title":"1.1 Test subtask 1","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T03:58:00.958648+01:00","updated_at":"2025-12-19T04:02:51.934268+01:00","deleted_at":"2025-12-19T04:02:51.934268+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-shepherd-ck1.1.2","title":"1.2 Test subtask 2","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T03:58:06.112352+01:00","updated_at":"2025-12-19T04:02:51.934268+01:00","deleted_at":"2025-12-19T04:02:51.934268+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-shepherd-ck1.2","title":"2. Another Section","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T03:58:11.529273+01:00","updated_at":"2025-12-19T04:02:51.934268+01:00","deleted_at":"2025-12-19T04:02:51.934268+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-shepherd-ck1.2.1","title":"2.1 Another subtask","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T03:58:16.762993+01:00","updated_at":"2025-12-19T04:02:51.934268+01:00","deleted_at":"2025-12-19T04:02:51.934268+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-shepherd-cow","title":"2.5 Implement Logging (JSONL + SQLite dual storage)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T03:52:51.166643+01:00","updated_at":"2025-12-19T04:02:51.934268+01:00","deleted_at":"2025-12-19T04:02:51.934268+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-shepherd-cpb","title":"Implement Agent Shepherd Orchestration System","description":"Complete implementation of Agent Shepherd - a TypeScript/Bun orchestration layer for AI coding agents using Beads and OpenCode. Includes CLI, worker/monitor engines, policy management, agent registry, logging, UI, and integrations.","status":"tombstone","priority":0,"issue_type":"epic","created_at":"2025-12-18T05:17:29.675596+01:00","updated_at":"2025-12-19T03:35:39.675983+01:00","labels":["agent-shepherd","epic","implementation"],"deleted_at":"2025-12-19T03:35:39.675983+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"epic"}
{"id":"agent-shepherd-cpb.1","title":"Create package.json with Bun, TypeScript, dependencies","description":"Set up package.json with latest Bun runtime, TypeScript compiler, and core dependencies including @opencode-ai/sdk, react, reactflow, yaml parser, sqlite3, commander for CLI","status":"tombstone","priority":0,"issue_type":"task","created_at":"2025-12-18T05:17:37.878493+01:00","updated_at":"2025-12-19T03:39:26.986607+01:00","close_reason":"Completed","labels":["dependencies","project-setup"],"deleted_at":"2025-12-19T03:39:26.986607+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"task"}
{"id":"agent-shepherd-cpb.10","title":"Implement Worker Engine","description":"Autonomous worker loop: query ready issues, resolve policies/phases, select agents, create runs, launch in OpenCode, handle outcomes","status":"tombstone","priority":0,"issue_type":"task","created_at":"2025-12-18T05:18:31.920155+01:00","updated_at":"2025-12-19T03:39:28.421831+01:00","close_reason":"Completed","labels":["engines","worker"],"deleted_at":"2025-12-19T03:39:28.421831+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"task"}
{"id":"agent-shepherd-cpb.11","title":"Implement Monitor Engine","description":"Supervision loop: track running runs, detect stalls/timeouts, handle HITL, detect human takeover, apply policy rules","status":"tombstone","priority":0,"issue_type":"task","created_at":"2025-12-18T05:18:38.953232+01:00","updated_at":"2025-12-19T03:39:28.56075+01:00","close_reason":"Completed","labels":["engines","monitor"],"deleted_at":"2025-12-19T03:39:28.56075+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"task"}
{"id":"agent-shepherd-cpb.12","title":"Implement CLI commands","description":"ashep worker, monitor, work, init, install, sync-agents, ui commands with proper argument parsing and help","status":"tombstone","priority":0,"issue_type":"task","created_at":"2025-12-18T05:18:44.114397+01:00","updated_at":"2025-12-19T03:39:28.731905+01:00","close_reason":"Completed","labels":["cli","engines"],"deleted_at":"2025-12-19T03:39:28.731905+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"task"}
{"id":"agent-shepherd-cpb.13","title":"Create placeholder ReactFlow UI","description":"Minimal ReactFlow-based visualization showing workflow phases, runs, and transitions with node/edge display","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-18T05:18:51.634612+01:00","updated_at":"2025-12-19T03:39:28.898246+01:00","close_reason":"Completed","labels":["reactflow","ui"],"deleted_at":"2025-12-19T03:39:28.898246+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"task"}
{"id":"agent-shepherd-cpb.14","title":"Implement UI server","description":"Tiny HTTP server for UI with configurable port, serving React app and providing API endpoints for run data","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-18T05:18:56.803258+01:00","updated_at":"2025-12-19T03:39:29.050281+01:00","close_reason":"Completed","labels":["server","ui"],"deleted_at":"2025-12-19T03:39:29.050281+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"task"}
{"id":"agent-shepherd-cpb.15","title":"Implement installer","description":"ashep install command: check Beads/OpenCode availability, suggest installations, validate environment","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-18T05:19:01.963766+01:00","updated_at":"2025-12-19T03:39:29.22335+01:00","close_reason":"Completed","labels":["installer","setup"],"deleted_at":"2025-12-19T03:39:29.22335+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"task"}
{"id":"agent-shepherd-cpb.16","title":"Implement init command","description":"ashep init: create .agent-shepherd directory with default policies.yaml, agents.yaml, config.yaml configurations","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-18T05:19:07.125742+01:00","updated_at":"2025-12-19T03:39:29.390609+01:00","close_reason":"Completed","labels":["config","installer"],"deleted_at":"2025-12-19T03:39:29.390609+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"task"}
{"id":"agent-shepherd-cpb.17","title":"Create JSON schemas","description":"JSON schemas for config.yaml, policies.yaml, agents.yaml, run outcomes, and other configuration files","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-18T05:19:14.371161+01:00","updated_at":"2025-12-19T03:39:29.534004+01:00","close_reason":"Completed","labels":["config","schemas"],"deleted_at":"2025-12-19T03:39:29.534004+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"task"}
{"id":"agent-shepherd-cpb.18","title":"Create default configurations","description":"Default config.yaml, policies.yaml, agents.yaml with working starter configurations for immediate use","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-18T05:19:19.521405+01:00","updated_at":"2025-12-19T03:39:29.702218+01:00","close_reason":"Completed","labels":["config","defaults"],"deleted_at":"2025-12-19T03:39:29.702218+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"task"}
{"id":"agent-shepherd-cpb.19","title":"Validate configurations","description":"Runtime validation of all YAML configurations at startup with helpful error messages","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-18T05:19:24.672541+01:00","updated_at":"2025-12-19T03:39:29.879458+01:00","close_reason":"Completed","labels":["config","validation"],"deleted_at":"2025-12-19T03:39:29.879458+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"task"}
{"id":"agent-shepherd-cpb.2","title":"Create tsconfig.json and bunfig.toml","description":"Configure TypeScript compiler options for strict type checking and Bun-specific settings for fast compilation and bundling","status":"tombstone","priority":0,"issue_type":"task","created_at":"2025-12-18T05:17:45.13496+01:00","updated_at":"2025-12-19T03:39:27.124337+01:00","close_reason":"Completed","labels":["project-setup","typescript"],"deleted_at":"2025-12-19T03:39:27.124337+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"task"}
{"id":"agent-shepherd-cpb.20","title":"Add unit tests","description":"Unit tests for core modules: Beads integration, OpenCode integration, Policy Engine, Agent Registry, Logging","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-18T05:19:31.627518+01:00","updated_at":"2025-12-19T03:39:30.021401+01:00","close_reason":"Completed","labels":["testing","unit"],"deleted_at":"2025-12-19T03:39:30.021401+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"task"}
{"id":"agent-shepherd-cpb.21","title":"Add integration tests","description":"Integration tests for CLI commands with mocked dependencies and end-to-end command workflows","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-18T05:19:38.964551+01:00","updated_at":"2025-12-19T03:39:30.208732+01:00","close_reason":"Completed","labels":["integration","testing"],"deleted_at":"2025-12-19T03:39:30.208732+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"task"}
{"id":"agent-shepherd-cpb.22","title":"Validate with linting and type checking","description":"Configure ESLint, Prettier, and ensure TypeScript strict mode passes on all code","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-18T05:19:44.168837+01:00","updated_at":"2025-12-19T03:39:30.354545+01:00","close_reason":"Completed","labels":["linting","testing"],"deleted_at":"2025-12-19T03:39:30.354545+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"task"}
{"id":"agent-shepherd-cpb.23","title":"Test end-to-end workflow","description":"Mock Beads and OpenCode services for complete workflow testing: issue creation → agent selection → run execution → outcome processing","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-18T05:19:49.382738+01:00","updated_at":"2025-12-19T03:39:30.522029+01:00","close_reason":"Completed","labels":["e2e","testing"],"deleted_at":"2025-12-19T03:39:30.522029+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"task"}
{"id":"agent-shepherd-cpb.24","title":"Create README.md","description":"Comprehensive README with setup instructions, CLI usage, configuration guide, and architecture overview","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-18T05:19:56.334286+01:00","updated_at":"2025-12-19T03:39:30.712538+01:00","close_reason":"Completed","labels":["docs","readme"],"deleted_at":"2025-12-19T03:39:30.712538+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"task"}
{"id":"agent-shepherd-cpb.25","title":"Expand architecture docs","description":"Detailed docs/architecture.md explaining the three-layer design, integration points, and workflow orchestration","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-18T05:20:01.503349+01:00","updated_at":"2025-12-19T03:39:30.851396+01:00","close_reason":"Completed","labels":["architecture","docs"],"deleted_at":"2025-12-19T03:39:30.851396+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"task"}
{"id":"agent-shepherd-cpb.26","title":"Document CLI commands and configs","description":"Complete reference for all CLI commands, configuration options, policy format, and agent registry structure","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-18T05:20:06.678639+01:00","updated_at":"2025-12-19T03:39:31.028687+01:00","close_reason":"Completed","labels":["docs","reference"],"deleted_at":"2025-12-19T03:39:31.028687+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"task"}
{"id":"agent-shepherd-cpb.3","title":"Set up directory structure","description":"Create src/cli, src/core, src/utils, .agent-shepherd, docs, schemas, ui directories with proper organization","status":"tombstone","priority":0,"issue_type":"task","created_at":"2025-12-18T05:17:50.283583+01:00","updated_at":"2025-12-19T03:39:27.295649+01:00","close_reason":"Completed","labels":["project-setup","structure"],"deleted_at":"2025-12-19T03:39:27.295649+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"task"}
{"id":"agent-shepherd-cpb.4","title":"Initialize git repo if not present","description":"Ensure git repository is initialized and configured for the project","status":"tombstone","priority":0,"issue_type":"task","created_at":"2025-12-18T05:17:55.442761+01:00","updated_at":"2025-12-19T03:39:27.47929+01:00","close_reason":"Completed","labels":["git","project-setup"],"deleted_at":"2025-12-19T03:39:27.47929+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"task"}
{"id":"agent-shepherd-cpb.5","title":"Implement Beads integration","description":"Shell commands for bd CLI, JSON parsing, issue status updates, label management, dependency checking, and comment posting","status":"tombstone","priority":0,"issue_type":"task","created_at":"2025-12-18T05:18:02.441585+01:00","updated_at":"2025-12-19T03:39:27.669884+01:00","close_reason":"Completed","labels":["beads","core-modules","integration"],"deleted_at":"2025-12-19T03:39:27.669884+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"task"}
{"id":"agent-shepherd-cpb.6","title":"Implement OpenCode integration","description":"@opencode-ai/sdk integration for session creation, message sending/receiving, agent management, and session lifecycle handling","status":"tombstone","priority":0,"issue_type":"task","created_at":"2025-12-18T05:18:09.735002+01:00","updated_at":"2025-12-19T03:39:27.786316+01:00","close_reason":"Completed","labels":["core-modules","integration","opencode"],"deleted_at":"2025-12-19T03:39:27.786316+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"task"}
{"id":"agent-shepherd-cpb.7","title":"Implement Policy Engine","description":"YAML parsing for policies, phase transitions, retry logic, timeout management, and HITL workflow handling","status":"tombstone","priority":0,"issue_type":"task","created_at":"2025-12-18T05:18:14.888439+01:00","updated_at":"2025-12-19T03:39:27.942789+01:00","close_reason":"Completed","labels":["core-modules","policy"],"deleted_at":"2025-12-19T03:39:27.942789+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"task"}
{"id":"agent-shepherd-cpb.8","title":"Implement Agent Registry","description":"YAML loading for agents.yaml, capability matching, priority selection, constraint filtering, and OpenCode sync","status":"tombstone","priority":0,"issue_type":"task","created_at":"2025-12-18T05:18:20.040282+01:00","updated_at":"2025-12-19T03:39:28.088513+01:00","close_reason":"Completed","labels":["core-modules","registry"],"deleted_at":"2025-12-19T03:39:28.088513+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"task"}
{"id":"agent-shepherd-cpb.9","title":"Implement Logging system","description":"JSONL append-only logs for runs with SQLite cache for fast queries, audit trail maintenance, and dual storage sync","status":"tombstone","priority":0,"issue_type":"task","created_at":"2025-12-18T05:18:25.195693+01:00","updated_at":"2025-12-19T03:39:28.261959+01:00","close_reason":"Completed","labels":["core-modules","logging"],"deleted_at":"2025-12-19T03:39:28.261959+01:00","deleted_by":"tonyhartmann","delete_reason":"manual delete","original_type":"task"}
{"id":"agent-shepherd-cqm","title":"Update config.ts to load and parse fallback section","description":"File: .agent-shepherd/src/core/config.ts\n\nTask: Load and parse fallback configuration from config.yaml\n\nRequired Changes:\n\n1. Add TypeScript interface for fallback configuration:\n```typescript\ninterface FallbackConfig {\n  enabled: boolean;\n  default_agent?: string;\n  mappings?: Record\u003cstring, string\u003e;\n}\n```\n\n2. Add fallback property to Config interface:\n```typescript\ninterface Config {\n  // ... existing properties\n  fallback?: FallbackConfig;\n}\n```\n\n3. Update loadConfig() to parse fallback section:\n   - Read fallback section from config.yaml\n   - Provide default values if not present:\n     - enabled: false (backward compatibility)\n     - No default_agent\n     - No mappings\n\n4. Ensure backward compatibility:\n   - If config doesn't have fallback section, treat as disabled\n   - If fallback section exists but is incomplete, use partial config with defaults\n\nExample Default:\n```typescript\nconst defaultFallback: FallbackConfig = {\n  enabled: false,\n  default_agent: undefined,\n  mappings: undefined\n};\n```\n\nAcceptance Criteria:\n- [ ] Fallback section loads correctly from config.yaml\n- [ ] Default values applied when fallback section missing\n- [ ] Partial fallback config handled gracefully\n- [ ] TypeScript types match schema structure\n- [ ] Backward compatibility maintained (no fallback = disabled)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T02:43:57.869734+01:00","updated_at":"2026-01-05T02:53:05.101312+01:00","closed_at":"2026-01-05T02:53:05.101312+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-cqm","depends_on_id":"agent-shepherd-uj0","type":"parent-child","created_at":"2026-01-05T02:45:00.507672+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-cru","title":"label-workflow-test: Batch label update test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:36:26.908786+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:36:27.022328+01:00","labels":["label2","label3"],"deleted_at":"2026-01-06T04:36:27.022328+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-cy2","title":"label-workflow-test: Exclusion test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:24:43.181407+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:28.852597+01:00","labels":["ashep-excluded"],"deleted_at":"2026-01-06T04:32:28.852597+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-d0nt","title":"label-workflow-test: Default workflow label test","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-06T15:58:04.549806+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:58:04.60716+01:00","labels":["ashep-workflow:default"],"deleted_at":"2026-01-06T15:58:04.60716+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"agent-shepherd-df8","title":"Phase 6: Update ashep init","description":"Modify cmdInit() in .agent-shepherd/src/cli/index.ts to always create local config in ./.agent-shepherd/config/ in current directory, regardless of whether global install exists, to support hybrid mode.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T03:19:14.815987+01:00","created_by":"tonyhartmann","updated_at":"2025-12-30T03:36:30.931374+01:00","closed_at":"2025-12-30T03:36:30.931374+01:00","close_reason":"Closed via update","dependencies":[{"issue_id":"agent-shepherd-df8","depends_on_id":"agent-shepherd-7gt","type":"parent-child","created_at":"2025-12-30T03:20:19.914049+01:00","created_by":"daemon"},{"issue_id":"agent-shepherd-df8","depends_on_id":"agent-shepherd-mca","type":"blocks","created_at":"2025-12-30T03:20:34.752542+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-dfq","title":"label-workflow-test: Exclusion test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:42:31.335919+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:42:31.398552+01:00","labels":["ashep-excluded"],"deleted_at":"2026-01-06T04:42:31.398552+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-do2","title":"label-workflow-test: Phase label remove test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:36:25.354577+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:36:25.512453+01:00","deleted_at":"2026-01-06T04:36:25.512453+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-ds4","title":"label-workflow-test: HITL label clear test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:34:14.220142+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:14.377284+01:00","deleted_at":"2026-01-06T04:34:14.377284+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-e6t","title":"label-workflow-test: Default workflow label test","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-06T04:36:24.889975+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:36:24.9524+01:00","labels":["ashep-workflow:default"],"deleted_at":"2026-01-06T04:36:24.9524+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"agent-shepherd-eaf","title":"Phase 3: Trigger System","description":"**Effort:** ~6 hours | **Risk:** Medium\n\nImplement automatic workflow selection based on labels and issue types.\n\n## Tasks\n\n1. Update PolicyConfig interface with issue_types and priority fields\n2. Implement `matchPolicy(issue: BeadsIssue)` method in PolicyEngine class\n3. Update `processIssue()` in WorkerEngine to use `matchPolicy()` instead of `getDefaultPolicyName()`\n4. Implement invalid workflow label handling based on config (error vs warning-fallback)\n5. Implement priority-based selection with tie-breaking (config order)\n6. Write unit tests for trigger system\n\n## Files Modified\n- `.agent-shepherd/src/core/policy.ts`\n- `.agent-shepherd/src/core/worker-engine.ts`\n- `tests/trigger-system.test.ts` (new file)\n\n## Acceptance Criteria\n- [ ] matchPolicy() method exists and works correctly\n- [ ] Explicit workflow label takes precedence\n- [ ] Issue type matching works correctly\n- [ ] Priority-based selection works (higher wins)\n- [ ] Config order breaks priority ties correctly\n- [ ] Default policy used when no match\n- [ ] Invalid workflow label handled according to invalid_label_strategy\n- [ ] Worker Engine uses matchPolicy() method\n- [ ] All unit tests passing\n\n## Code Preview (policy.ts)\n```typescript\nexport interface PolicyConfig {\n  name: string;\n  description?: string;\n  issue_types?: string[];  // NEW\n  priority?: number;       // NEW: 1-100, default 50\n  phases: PhaseConfig[];\n  retry?: RetryConfig;\n  timeout_base_ms?: number;\n  stall_threshold_ms?: number;\n  require_hitl?: boolean;\n  fallback_enabled?: boolean;\n  fallback_agent?: string;\n  fallback_mappings?: Record\u003cstring, string\u003e;\n}\n\n// Add to PolicyEngine class\nmatchPolicy(issue: BeadsIssue): string {\n  const config = getConfig();\n  const policyNames = this.getPolicyNames();\n  \n  // 1. Check for explicit workflow label (ashep-workflow:xxx)\n  const workflowLabel = issue.labels?.find(l =\u003e l.startsWith('ashep-workflow:'));\n  if (workflowLabel) {\n    const workflowName = workflowLabel.split(':')[1];\n    \n    if (this.policies.has(workflowName)) {\n      console.log(`Using explicitly assigned workflow: ${workflowName}`);\n      return workflowName;\n    }\n    \n    // Handle invalid workflow label\n    const strategy = config.workflow?.invalid_label_strategy || 'warning-fallback';\n    \n    if (strategy === 'error') {\n      console.error(`Workflow label '${workflowName}' not found (invalid_label_strategy: error)`);\n      throw new Error(`Workflow '${workflowName}' does not exist`);\n    } else {\n      console.warn(`Workflow label '${workflowName}' not found (invalid_label_strategy: warning-fallback), falling back to type matching`);\n    }\n  }\n  \n  // 2. Match by issue type\n  const matchingPolicies: Array\u003c{name: string, priority: number, index: number}\u003e = [];\n  \n  for (let i = 0; i \u003c policyNames.length; i++) {\n    const name = policyNames[i];\n    const policy = this.policies.get(name);\n    if (!policy || !policy.issue_types) continue;\n    \n    if (policy.issue_types.includes(issue.issue_type)) {\n      matchingPolicies.push({\n        name,\n        priority: policy.priority || 50,\n        index: i  // Track config order for tie-breaking\n      });\n    }\n  }\n  \n  // Sort by priority (highest first), then by config order\n  if (matchingPolicies.length \u003e 0) {\n    matchingPolicies.sort((a, b) =\u003e {\n      if (b.priority !== a.priority) {\n        return b.priority - a.priority; // Higher priority first\n      }\n      return a.index - b.index; // Config order for ties\n    });\n    \n    const selected = matchingPolicies[0].name;\n    console.log(`Matched policy '${selected}' by issue type '${issue.issue_type}' (priority: ${matchingPolicies[0].priority})`);\n    return selected;\n  }\n  \n  // 3. Fallback to default\n  console.log(`No policy matched issue type '${issue.issue_type}', using default: ${this.defaultPolicy}`);\n  return this.defaultPolicy;\n}\n```","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-05T17:08:42.518166+01:00","updated_at":"2026-01-05T17:22:58.058895+01:00","close_reason":"Removed as requested by user","dependencies":[{"issue_id":"agent-shepherd-eaf","depends_on_id":"agent-shepherd-3of","type":"parent-child","created_at":"2026-01-05T17:08:49.962297+01:00","created_by":"daemon"},{"issue_id":"agent-shepherd-eaf","depends_on_id":"agent-shepherd-bj9","type":"blocks","created_at":"2026-01-05T17:10:01.829694+01:00","created_by":"daemon"}],"deleted_at":"2026-01-05T17:22:58.058895+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-eal","title":"2.2 Implement OpenCode integration (@opencode-ai/sdk, sessions, messages)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T03:55:10.869243+01:00","updated_at":"2025-12-19T04:02:51.934268+01:00","deleted_at":"2025-12-19T04:02:51.934268+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-shepherd-egi.2","title":"Create package.json with Bun, TypeScript, dependencies","description":"Set up package.json with latest Bun runtime, TypeScript compiler, and core dependencies including @opencode-ai/sdk, react, reactflow, yaml parser, sqlite3, commander for CLI","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-18T04:57:12.156631+01:00","updated_at":"2025-12-18T05:21:46.930572+01:00","labels":["dependencies","project-setup"],"deleted_at":"2025-12-18T05:21:46.930572+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-shepherd-egi.4","title":"Create tsconfig.json and bunfig.toml","description":"Configure TypeScript compiler options for strict type checking and Bun-specific settings for fast compilation and bundling","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-18T04:57:25.128803+01:00","updated_at":"2025-12-18T05:21:46.930572+01:00","labels":["project-setup","typescript"],"deleted_at":"2025-12-18T05:21:46.930572+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-shepherd-egi.5","title":"Set up directory structure","description":"Create src/cli, src/core, src/utils, .agent-shepherd, docs, schemas, ui directories with proper organization","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-18T04:57:31.731885+01:00","updated_at":"2025-12-18T05:21:46.930572+01:00","labels":["project-setup","structure"],"deleted_at":"2025-12-18T05:21:46.930572+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-shepherd-egi.6","title":"Initialize git repo if not present","description":"Ensure git repository is initialized and configured for the project","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-18T04:57:38.155893+01:00","updated_at":"2025-12-18T05:21:46.930572+01:00","labels":["git","project-setup"],"deleted_at":"2025-12-18T05:21:46.930572+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-shepherd-evu","title":"label-workflow-test: Invalid workflow label test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:36:24.981493+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:36:25.041728+01:00","labels":["ashep-workflow:nonexistent-workflow"],"deleted_at":"2026-01-06T04:36:25.041728+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-ey7","title":"Test issue with label","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-05T15:39:52.328754+01:00","created_by":"tonyhartmann","updated_at":"2026-01-05T15:40:06.262193+01:00","labels":["ashep:excluded","priority:high"],"deleted_at":"2026-01-05T15:40:06.262193+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-shepherd-ey8a","title":"label-workflow-test: Default policy test","status":"tombstone","priority":2,"issue_type":"chore","created_at":"2026-01-06T16:00:25.239424+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T16:00:25.299679+01:00","deleted_at":"2026-01-06T16:00:25.299679+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"chore"}
{"id":"agent-shepherd-f5z","title":"label-workflow-test: Empty label ops test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:34:14.908272+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:15.010176+01:00","deleted_at":"2026-01-06T04:34:15.010176+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-f7ag","title":"label-workflow-test: Exclusion toggle test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:58:05.794106+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:58:05.896244+01:00","deleted_at":"2026-01-06T15:58:05.896244+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-fcj2","title":"label-workflow-test: Explicit workflow label test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:54:00.395314+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:54:00.452265+01:00","labels":["ashep-workflow:simple"],"deleted_at":"2026-01-06T15:54:00.452265+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-fh4c","title":"label-workflow-test: HITL label read test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:58:05.34651+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:58:05.410511+01:00","labels":["ashep-hitl:manual-intervention"],"deleted_at":"2026-01-06T15:58:05.410511+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-fhk8","title":"label-workflow-test: Non-exclusion test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T16:00:26.163622+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T16:00:26.201438+01:00","deleted_at":"2026-01-06T16:00:26.201438+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-fhmw","title":"label-workflow-test: Full workflow lifecycle test","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-06T15:58:05.924565+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:58:06.278918+01:00","labels":["ashep-workflow:simple"],"deleted_at":"2026-01-06T15:58:06.278918+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"agent-shepherd-fky","title":"2.3 Implement Policy Engine (YAML parsing, phase transitions)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T03:55:21.214175+01:00","updated_at":"2025-12-19T04:02:51.934268+01:00","deleted_at":"2025-12-19T04:02:51.934268+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-shepherd-fs7","title":"label-workflow-test: Bug issue type test","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2026-01-06T04:24:42.860639+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:29.055576+01:00","deleted_at":"2026-01-06T04:32:29.055576+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"bug"}
{"id":"agent-shepherd-ftb","title":"1.3 Set up directory structure (src/cli, src/core, src/utils, .agent-shepherd, docs, schemas, ui)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T03:51:38.984194+01:00","updated_at":"2025-12-19T04:02:51.934268+01:00","deleted_at":"2025-12-19T04:02:51.934268+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-shepherd-g43","title":"label-workflow-test: Default policy test","status":"tombstone","priority":2,"issue_type":"chore","created_at":"2026-01-06T04:36:25.069101+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:36:25.126357+01:00","deleted_at":"2026-01-06T04:36:25.126357+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"chore"}
{"id":"agent-shepherd-g4i","title":"Phase 7: Documentation Updates","description":"Update .agent-shepherd/README.md with new installation instructions: quick install via curl/irm, hybrid vs local explanation, update command usage, developer setup (git clone for contributors).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T03:20:22.41018+01:00","created_by":"tonyhartmann","updated_at":"2025-12-30T03:36:48.642054+01:00","closed_at":"2025-12-30T03:36:48.642054+01:00","close_reason":"Closed via update","dependencies":[{"issue_id":"agent-shepherd-g4i","depends_on_id":"agent-shepherd-7gt","type":"parent-child","created_at":"2025-12-30T03:20:24.370006+01:00","created_by":"daemon"},{"issue_id":"agent-shepherd-g4i","depends_on_id":"agent-shepherd-df8","type":"blocks","created_at":"2025-12-30T03:20:36.935571+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-gh8","title":"label-workflow-test: Empty label ops test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:36:27.049975+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:36:27.154189+01:00","deleted_at":"2026-01-06T04:36:27.154189+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-glui","title":"label-workflow-test: Phase label read test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T16:00:25.435233+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T16:00:25.4937+01:00","labels":["ashep-phase:test"],"deleted_at":"2026-01-06T16:00:25.4937+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-gsw","title":"label-workflow-test: Exclusion toggle test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:32:30.787096+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:30.883734+01:00","deleted_at":"2026-01-06T04:32:30.883734+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-guf","title":"label-workflow-test: Feature priority test","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-06T04:24:42.88875+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:29.035145+01:00","deleted_at":"2026-01-06T04:32:29.035145+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"agent-shepherd-gvo","title":"label-workflow-test: Invalid workflow label test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:32:29.33088+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:29.393015+01:00","labels":["ashep-workflow:nonexistent-workflow"],"deleted_at":"2026-01-06T04:32:29.393015+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-h7w","title":"label-workflow-test: Exclusion toggle test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:42:31.497837+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:42:31.600356+01:00","deleted_at":"2026-01-06T04:42:31.600356+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-h94","title":"label-workflow-test: Invalid workflow label test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:35:53.557731+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:35:53.620364+01:00","labels":["ashep-workflow:nonexistent-workflow"],"deleted_at":"2026-01-06T04:35:53.620364+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-hb0o","title":"label-workflow-test: Empty label ops test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:58:06.445953+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:58:06.541539+01:00","deleted_at":"2026-01-06T15:58:06.541539+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-hiy","title":"label-workflow-test: Default policy test","status":"tombstone","priority":2,"issue_type":"chore","created_at":"2026-01-06T04:42:30.413743+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:42:30.475048+01:00","deleted_at":"2026-01-06T04:42:30.475048+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"chore"}
{"id":"agent-shepherd-hvb","title":"label-workflow-test: Non-exclusion test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:32:30.717199+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:30.756704+01:00","deleted_at":"2026-01-06T04:32:30.756704+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-iasd","title":"label-workflow-test: Default policy test","status":"tombstone","priority":2,"issue_type":"chore","created_at":"2026-01-06T15:58:04.721067+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:58:04.775578+01:00","deleted_at":"2026-01-06T15:58:04.775578+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"chore"}
{"id":"agent-shepherd-igd4","title":"label-workflow-test: HITL label set test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:57:13.179084+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:57:13.263737+01:00","labels":["ashep-hitl:approval"],"deleted_at":"2026-01-06T15:57:13.263737+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-ix8","title":"1.2 Create tsconfig.json and bunfig.toml","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T03:51:28.650801+01:00","updated_at":"2025-12-19T04:02:51.934268+01:00","deleted_at":"2025-12-19T04:02:51.934268+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-shepherd-iy9h","title":"label-workflow-test: Batch label update test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T16:00:26.758238+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T16:00:26.884403+01:00","labels":["label2","label3"],"deleted_at":"2026-01-06T16:00:26.884403+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-j2g","title":"Update docs/config-config.md with fallback configuration","description":"File: .agent-shepherd/docs/config-config.md\n\nTask: Document fallback configuration section with examples\n\nRequired Changes:\n\n1. Add new section \"Fallback Agent Configuration\" in the config reference\n\n2. Document all fallback configuration fields:\n   - fallback.enabled (boolean): Master switch\n   - fallback.default_agent (string): Default fallback agent\n   - fallback.mappings (object): Capability-specific mappings\n\n3. Provide configuration examples:\n\nBasic Example:\n```yaml\nfallback:\n  enabled: true\n  default_agent: build\n```\n\nAdvanced Example with Mappings:\n```yaml\nfallback:\n  enabled: true\n  default_agent: build\n  mappings:\n    review: summary\n    architecture: plan\n    documentation: summary\n    testing: general\n```\n\nDisabled Example:\n```yaml\nfallback:\n  enabled: false\n```\n\n4. Explain master switch behavior:\n   - When enabled: false, no fallback anywhere in the system\n   - When enabled: true, fallback active unless disabled at lower levels\n   - Why master switch exists (quick disable for troubleshooting)\n\n5. Document how mappings work:\n   - Without mappings: All capabilities use default_agent\n   - With mappings: Specific capabilities use different agents\n   - Remaining capabilities fall back to default_agent\n\n6. Add troubleshooting section:\n   - Common issues (fallback agent doesn't exist, inactive)\n   - How to debug fallback behavior\n   - Validation output examples\n\nAcceptance Criteria:\n- [ ] Fallback section added to config documentation\n- [ ] All fields documented with types and descriptions\n- [ ] Multiple configuration examples provided\n- [ ] Master switch behavior explained\n- [ ] Mappings usage explained clearly\n- [ ] Troubleshooting section added\n- [ ] Examples are well-commented\n- [ ] Documentation is comprehensive and clear","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T02:44:34.418196+01:00","updated_at":"2026-01-05T03:22:01.569141+01:00","closed_at":"2026-01-05T03:22:01.569141+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-j2g","depends_on_id":"agent-shepherd-uj0","type":"parent-child","created_at":"2026-01-05T02:45:00.524314+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-jd0","title":"label-workflow-test: Invalid workflow label test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:24:42.832276+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:29.075934+01:00","labels":["ashep-workflow:nonexistent-workflow"],"deleted_at":"2026-01-06T04:32:29.075934+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-jhdp","title":"label-workflow-test: Invalid workflow label test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:54:00.56485+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:54:00.619672+01:00","labels":["ashep-workflow:nonexistent-workflow"],"deleted_at":"2026-01-06T15:54:00.619672+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-k0vi","title":"label-workflow-test: Exclusion test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:54:01.457365+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:54:01.49418+01:00","labels":["ashep-excluded"],"deleted_at":"2026-01-06T15:54:01.49418+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-k28","title":"label-workflow-test: Empty label ops test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:35:55.341437+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:35:55.443211+01:00","deleted_at":"2026-01-06T04:35:55.443211+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-k4td","title":"label-workflow-test: Default policy test","status":"tombstone","priority":2,"issue_type":"chore","created_at":"2026-01-06T15:54:00.645609+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:54:00.700818+01:00","deleted_at":"2026-01-06T15:54:00.700818+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"chore"}
{"id":"agent-shepherd-k6j","title":"label-workflow-test: Custom workflow label test","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-06T04:32:29.239713+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:29.299472+01:00","labels":["ashep-workflow:advanced"],"deleted_at":"2026-01-06T04:32:29.299472+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"agent-shepherd-k77z","title":"label-workflow-test: Phase label set test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:57:12.802825+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:57:12.878485+01:00","labels":["ashep-phase:implement"],"deleted_at":"2026-01-06T15:57:12.878485+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-kgv6","title":"label-workflow-test: Default workflow label test","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-06T15:54:00.47946+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:54:00.536327+01:00","labels":["ashep-workflow:default"],"deleted_at":"2026-01-06T15:54:00.536327+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"agent-shepherd-kqp","title":"Update cmdQuickstart() with fallback explanation","description":"File: .agent-shepherd/src/cli/index.ts\n\nTask: Add explanation about fallback system to cmdQuickstart() output\n\nRequired Changes:\n\n1. Locate cmdQuickstart() function in src/cli/index.ts\n\n2. After validation runs successfully, add explanation section:\n```\n✓ Agent Shepherd Quickstart Complete!\n\nℹ️  Fallback Agent System\n   Your configuration includes a fallback agent system that allows\n   capabilities without specialized agents to be handled by general agents.\n   \n   This is normal for first-time setup. The following capabilities are using fallback:\n   • testing → Build Agent\n   • review → Build Agent\n   \n   You can customize fallback behavior in .agent-shepherd/config/config.yaml\n```\n\n3. Show which capabilities are using fallback:\n   - Parse validation results for fallback info\n   - Display each capability and its fallback agent\n\n4. Make it clear this is normal for first-time setup:\n   - Add reassurance that fallback usage is expected\n   - Explain that users can add specialized agents later\n   - Reference config-config.md for more details\n\n5. Make the fallback explanation visually distinct:\n   - Use different styling or spacing\n   - Make it stand out from regular output\n\nAcceptance Criteria:\n- [ ] Fallback explanation displayed after quickstart\n- [ ] Shows which capabilities use fallback\n- [ ] Explains that this is normal for first-time setup\n- [ ] Mentions config file location for customization\n- [ ] Output is visually distinct\n- [ ] Message is reassuring to new users","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T02:44:34.381771+01:00","updated_at":"2026-01-05T03:11:24.353857+01:00","closed_at":"2026-01-05T03:11:24.353857+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-kqp","depends_on_id":"agent-shepherd-uj0","type":"parent-child","created_at":"2026-01-05T02:45:00.522143+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-l0g","title":"label-workflow-test: HITL label set test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:24:43.077719+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:28.913448+01:00","deleted_at":"2026-01-06T04:32:28.913448+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-l0q","title":"label-workflow-test: Default policy test","status":"tombstone","priority":2,"issue_type":"chore","created_at":"2026-01-06T04:32:29.606303+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:29.671256+01:00","deleted_at":"2026-01-06T04:32:29.671256+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"chore"}
{"id":"agent-shepherd-l97","title":"label-workflow-test: Phase label read test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:32:29.915056+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:29.978177+01:00","labels":["ashep-phase:test"],"deleted_at":"2026-01-06T04:32:29.978177+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-lnpt","title":"label-workflow-test: Invalid workflow label test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:57:12.631968+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:57:12.689709+01:00","labels":["ashep-workflow:nonexistent-workflow"],"deleted_at":"2026-01-06T15:57:12.689709+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-lsp9","title":"label-workflow-test: HITL label set test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:58:05.232283+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:58:05.315565+01:00","labels":["ashep-hitl:approval"],"deleted_at":"2026-01-06T15:58:05.315565+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-lt8a","title":"label-workflow-test: Empty label ops test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:57:14.404389+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:57:14.500657+01:00","deleted_at":"2026-01-06T15:57:14.500657+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-lvw","title":"label-workflow-test: Default policy test","status":"tombstone","priority":2,"issue_type":"chore","created_at":"2026-01-06T04:34:13.547414+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:13.605596+01:00","deleted_at":"2026-01-06T04:34:13.605596+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"chore"}
{"id":"agent-shepherd-m0i","title":"Phase 4: Phase \u0026 HITL Tracking","description":"**Effort:** ~6 hours | **Risk:** Medium\n\nTrack workflow phases and human-in-the-loop states via labels.\n\n## Tasks\n\n1. Implement `setPhaseLabel(issueId, phaseName)` function in beads.ts\n2. Implement `removePhaseLabels(issueId)` helper in beads.ts\n3. Implement `setHITLLabel(issueId, reason)` function in beads.ts\n4. Implement `clearHITLLabels(issueId)` function in beads.ts\n5. Implement `validateHITLReason(reason, config)` function in policy.ts\n6. Update `processIssue()` in worker-engine.ts to read phase labels and resume from current phase\n7. Update `applyTransition()` to manage phase labels on transitions\n8. Update `applyTransition()` to set/clear HITL labels\n9. Add approval note generation when HITL triggered\n10. Write unit tests for phase and HITL tracking\n\n## Files Modified\n- `.agent-shepherd/src/core/beads.ts`\n- `.agent-shepherd/src/core/policy.ts`\n- `.agent-shepherd/src/core/worker-engine.ts`\n- `tests/phase-tracking.test.ts` (new file)\n- `tests/hitl-tracking.test.ts` (new file)\n\n## Acceptance Criteria\n- [ ] setPhaseLabel() sets correct label format\n- [ ] removePhaseLabels() removes all phase labels\n- [ ] setHITLLabel() sets correct label format\n- [ ] clearHITLLabels() removes all HITL labels\n- [ ] validateHITLReason() validates predefined reasons\n- [ ] validateHITLReason() validates custom reasons based on config\n- [ ] processIssue() reads phase label and resumes correctly\n- [ ] applyTransition() updates phase label on advance\n- [ ] applyTransition() keeps phase label on retry\n- [ ] applyTransition() sets HITL label on approval block\n- [ ] applyTransition() removes all tracking labels on close\n- [ ] Approval note generated when HITL triggered\n- [ ] All unit tests passing\n\n## Code Preview (beads.ts - Phase functions)\n```typescript\nasync function setPhaseLabel(issueId: string, phaseName: string): Promise\u003cvoid\u003e {\n  await removePhaseLabels(issueId);\n  const phaseLabel = `ashep-phase:${phaseName}`;\n  await execBeadsCommand([\"update\", issueId, \"--add-label\", phaseLabel]);\n  console.log(`Set phase label: ${phaseLabel}`);\n}\n\nasync function removePhaseLabels(issueId: string): Promise\u003cvoid\u003e {\n  const labels = await getIssueLabels(issueId);\n  const phaseLabels = labels.filter(l =\u003e l.startsWith('ashep-phase:'));\n  \n  for (const label of phaseLabels) {\n    try {\n      await execBeadsCommand([\"update\", issueId, \"--remove-label\", label]);\n    } catch (error) {\n      if (!error.message.includes(\"not found\")) {\n        throw error;\n      }\n    }\n  }\n}\n```\n\n## Code Preview (beads.ts - HITL functions)\n```typescript\nasync function setHITLLabel(issueId: string, reason: string): Promise\u003cvoid\u003e {\n  const hitlLabel = `ashep-hitl:${reason}`;\n  await execBeadsCommand([\"update\", issueId, \"--add-label\", hitlLabel]);\n  console.log(`Set HITL label: ${hitlLabel}`);\n}\n\nasync function clearHITLLabels(issueId: string): Promise\u003cvoid\u003e {\n  const labels = await getIssueLabels(issueId);\n  const hitlLabels = labels.filter(l =\u003e l.startsWith('ashep-hitl:'));\n  \n  for (const label of hitlLabels) {\n    try {\n      await execBeadsCommand([\"update\", issueId, \"--remove-label\", label]);\n    } catch (error) {\n      if (!error.message.includes(\"not found\")) {\n        throw error;\n      }\n    }\n  }\n  \n  console.log(`Cleared ${hitlLabels.length} HITL labels`);\n}\n```","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-05T17:09:06.558814+01:00","updated_at":"2026-01-05T17:22:57.927176+01:00","close_reason":"Removed as requested by user","dependencies":[{"issue_id":"agent-shepherd-m0i","depends_on_id":"agent-shepherd-3of","type":"parent-child","created_at":"2026-01-05T17:09:11.624187+01:00","created_by":"daemon"},{"issue_id":"agent-shepherd-m0i","depends_on_id":"agent-shepherd-eaf","type":"blocks","created_at":"2026-01-05T17:10:11.320976+01:00","created_by":"daemon"}],"deleted_at":"2026-01-05T17:22:57.927176+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-m2v","title":"label-workflow-test: HITL label read test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:24:43.110476+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:28.893644+01:00","deleted_at":"2026-01-06T04:32:28.893644+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-mca","title":"Phase 4: Update \u0026 Version Commands","description":"Add 'update' and 'version' to COMMANDS in .agent-shepherd/src/cli/index.ts. Implement cmdUpdate(version?: string) to download new version, preserve config/plugins, reinstall. Implement cmdVersion() to read VERSION file or package.json version. Add getCurrentVersion() helper. Add cases to switch statement.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T03:19:12.485651+01:00","created_by":"tonyhartmann","updated_at":"2025-12-30T03:36:17.481644+01:00","closed_at":"2025-12-30T03:36:17.481644+01:00","close_reason":"Closed via update","dependencies":[{"issue_id":"agent-shepherd-mca","depends_on_id":"agent-shepherd-7gt","type":"parent-child","created_at":"2025-12-30T03:20:18.075885+01:00","created_by":"daemon"},{"issue_id":"agent-shepherd-mca","depends_on_id":"agent-shepherd-5is","type":"blocks","created_at":"2025-12-30T03:20:32.816738+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-md5","title":"label-workflow-test: Explicit workflow label test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:34:52.778849+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:52.837068+01:00","labels":["ashep-workflow:simple"],"deleted_at":"2026-01-06T04:34:52.837068+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-mexf","title":"label-workflow-test: Phase label read test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:57:12.904957+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:57:12.960948+01:00","labels":["ashep-phase:test"],"deleted_at":"2026-01-06T15:57:12.960948+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-mp2a","title":"label-workflow-test: Exclusion toggle test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:57:13.743481+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:57:13.849095+01:00","deleted_at":"2026-01-06T15:57:13.849095+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-n9n","title":"Phase 2: Hybrid Installation Support","description":"Update .agent-shepherd/src/core/path-utils.ts to support hybrid mode (global binary + local config). Replace implementation with: getGlobalInstallDir() using homedir, findLocalAgentShepherdDir() searching upward, findInstallDir() checking local src/ then global, findConfigDir() checking local config/ then global, findPluginsDir() local then global, legacy findAgentShepherdDir for backward compatibility. Update all files using path-utils: config.ts, config-validator.ts, agent-registry.ts, policy.ts, cli/index.ts.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T03:19:05.989806+01:00","created_by":"tonyhartmann","updated_at":"2025-12-30T03:33:56.808923+01:00","closed_at":"2025-12-30T03:33:56.808923+01:00","close_reason":"Closed via update","dependencies":[{"issue_id":"agent-shepherd-n9n","depends_on_id":"agent-shepherd-7gt","type":"parent-child","created_at":"2025-12-30T03:20:13.764001+01:00","created_by":"daemon"},{"issue_id":"agent-shepherd-n9n","depends_on_id":"agent-shepherd-32d","type":"blocks","created_at":"2025-12-30T03:20:28.870494+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-nd0","title":"label-workflow-test: Full workflow lifecycle test","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-06T04:32:30.914833+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:30.977399+01:00","labels":["ashep-workflow:simple"],"deleted_at":"2026-01-06T04:32:30.977399+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"agent-shepherd-nm7","title":"label-workflow-test: HITL label set test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:35:54.115919+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:35:54.208971+01:00","labels":["ashep-hitl:approval"],"deleted_at":"2026-01-06T04:35:54.208971+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-nqc","title":"label-workflow-test: HITL label read test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:34:14.132485+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:14.1916+01:00","labels":["ashep-hitl:manual-intervention"],"deleted_at":"2026-01-06T04:34:14.1916+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-o98","title":"label-workflow-test: HITL label read test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:32:30.362846+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:30.420777+01:00","labels":["ashep-hitl:manual-intervention"],"deleted_at":"2026-01-06T04:32:30.420777+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-o9k","title":"label-workflow-test: Non-exclusion test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:35:54.586892+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:35:54.628613+01:00","deleted_at":"2026-01-06T04:35:54.628613+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-och0","title":"label-workflow-test: Exclusion toggle test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T16:00:26.228798+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T16:00:26.323194+01:00","deleted_at":"2026-01-06T16:00:26.323194+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-ovkp","title":"label-workflow-test: Phase label remove test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:54:00.909347+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:54:01.055181+01:00","deleted_at":"2026-01-06T15:54:01.055181+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-own","title":"label-workflow-test: Exclusion test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:32:30.64096+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:30.688856+01:00","labels":["ashep-excluded"],"deleted_at":"2026-01-06T04:32:30.688856+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-oy5h","title":"label-workflow-test: Default policy test","status":"tombstone","priority":2,"issue_type":"chore","created_at":"2026-01-06T15:57:12.717863+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:57:12.776211+01:00","deleted_at":"2026-01-06T15:57:12.776211+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"chore"}
{"id":"agent-shepherd-ozp","title":"label-workflow-test: Invalid workflow label test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:42:30.317568+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:42:30.384286+01:00","labels":["ashep-workflow:nonexistent-workflow"],"deleted_at":"2026-01-06T04:42:30.384286+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-p94","title":"label-workflow-test: Default workflow label test","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-06T04:35:53.462833+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:35:53.528757+01:00","labels":["ashep-workflow:default"],"deleted_at":"2026-01-06T04:35:53.528757+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"agent-shepherd-pbcy","title":"label-workflow-test: Default workflow label test","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-06T15:57:12.539837+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:57:12.601906+01:00","labels":["ashep-workflow:default"],"deleted_at":"2026-01-06T15:57:12.601906+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"agent-shepherd-peo","title":"label-workflow-test: Empty label ops test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:34:54.723899+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:54.816256+01:00","deleted_at":"2026-01-06T04:34:54.816256+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-pgu","title":"label-workflow-test: Phase label remove test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:24:43.046483+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:28.932946+01:00","deleted_at":"2026-01-06T04:32:28.932946+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-ppos","title":"label-workflow-test: Full workflow lifecycle test","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-06T15:54:01.702174+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:54:02.051113+01:00","labels":["ashep-workflow:simple"],"deleted_at":"2026-01-06T15:54:02.051113+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"agent-shepherd-qku","title":"label-workflow-test: Explicit workflow label test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:42:30.123386+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:42:30.184126+01:00","labels":["ashep-workflow:simple"],"deleted_at":"2026-01-06T04:42:30.184126+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-r3e","title":"Test format check","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T04:30:02.987535+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:30:02.987535+01:00"}
{"id":"agent-shepherd-r6p","title":"label-workflow-test: Phase label read test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:36:25.267016+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:36:25.326475+01:00","labels":["ashep-phase:test"],"deleted_at":"2026-01-06T04:36:25.326475+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-rm5","title":"label-workflow-test: Batch label update test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:35:55.194397+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:35:55.314564+01:00","labels":["label2","label3"],"deleted_at":"2026-01-06T04:35:55.314564+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-rnje","title":"label-workflow-test: Full workflow lifecycle test","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-06T16:00:26.352124+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T16:00:26.728512+01:00","labels":["ashep-workflow:simple"],"deleted_at":"2026-01-06T16:00:26.728512+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"agent-shepherd-rs67","title":"label-workflow-test: Empty label ops test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T16:00:26.912734+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T16:00:27.009473+01:00","deleted_at":"2026-01-06T16:00:27.009473+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-s2d","title":"label-workflow-test: Phase label set test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:34:13.636825+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:13.718168+01:00","labels":["ashep-phase:implement"],"deleted_at":"2026-01-06T04:34:13.718168+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-s4t","title":"Phase 5: Exclusion Control","description":"**Effort:** ~2 hours | **Risk:** Low\n\nExclude issues from processing via `ashep-excluded` label.\n\n## Tasks\n\n1. Implement `hasExcludedLabel(issueId)` helper in beads.ts\n2. Update `getEligibleIssues()` in worker-engine.ts to filter by label (not text)\n3. Remove `excluded_tags` from WorkerConfig interface\n4. Update WorkerEngine constructor to remove excluded_tags\n5. Write unit tests for exclusion logic\n\n## Files Modified\n- `.agent-shepherd/src/core/beads.ts`\n- `.agent-shepherd/src/core/worker-engine.ts`\n- `tests/exclusion-control.test.ts` (new file)\n\n## Acceptance Criteria\n- [ ] hasExcludedLabel() correctly identifies excluded issues\n- [ ] getEligibleIssues() filters by label (not text)\n- [ ] excluded_tags removed from WorkerConfig\n- [ ] Constructor doesn't use excluded_tags\n- [ ] Excluded issues are skipped with log message\n- [ ] Unit tests passing\n\n## Code Preview (beads.ts)\n```typescript\nasync function hasExcludedLabel(issueId: string): Promise\u003cboolean\u003e {\n  const labels = await getIssueLabels(issueId);\n  return labels?.includes('ashep-excluded') || false;\n}\n```\n\n## Code Preview (worker-engine.ts)\n```typescript\nexport interface WorkerConfig {\n  poll_interval_ms?: number;\n  max_concurrent_runs?: number;\n  // excluded_tags?: string[];  // REMOVED\n}\n\nconstructor(config?: WorkerConfig) {\n  this.config = {\n    poll_interval_ms: 30000,\n    max_concurrent_runs: 3,\n    // excluded_tags removed\n    ...config,\n  };\n}\n\nprivate async getEligibleIssues(): Promise\u003cBeadsIssue[]\u003e {\n  const readyIssues = await getReadyIssues();\n  \n  // Filter out excluded issues (by label, not text)\n  const eligibleIssues: BeadsIssue[] = [];\n  \n  for (const issue of readyIssues) {\n    const isExcluded = issue.labels?.includes('ashep-excluded') || false;\n    \n    if (isExcluded) {\n      console.log(`Skipping excluded issue: ${issue.id} (${issue.title})`);\n    } else {\n      eligibleIssues.push(issue);\n    }\n  }\n  \n  return eligibleIssues;\n}\n```","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-05T17:09:21.35749+01:00","updated_at":"2026-01-05T17:22:57.803826+01:00","close_reason":"Removed as requested by user","dependencies":[{"issue_id":"agent-shepherd-s4t","depends_on_id":"agent-shepherd-3of","type":"parent-child","created_at":"2026-01-05T17:09:26.362492+01:00","created_by":"daemon"},{"issue_id":"agent-shepherd-s4t","depends_on_id":"agent-shepherd-m0i","type":"blocks","created_at":"2026-01-05T17:10:25.973667+01:00","created_by":"daemon"}],"deleted_at":"2026-01-05T17:22:57.803826+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-sokq","title":"label-workflow-test: Phase label set test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:58:04.805896+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:58:04.892429+01:00","labels":["ashep-phase:implement"],"deleted_at":"2026-01-06T15:58:04.892429+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-svc9","title":"label-workflow-test: Invalid workflow label test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:58:04.635921+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:58:04.693357+01:00","labels":["ashep-workflow:nonexistent-workflow"],"deleted_at":"2026-01-06T15:58:04.693357+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-t74","title":"label-workflow-test: Phase label remove test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:34:53.322186+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:53.497962+01:00","deleted_at":"2026-01-06T04:34:53.497962+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-t9mj","title":"label-workflow-test: Invalid workflow label test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T16:00:25.150454+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T16:00:25.208033+01:00","labels":["ashep-workflow:nonexistent-workflow"],"deleted_at":"2026-01-06T16:00:25.208033+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-tio","title":"label-workflow-test: Explicit workflow label test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:35:53.361258+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:35:53.429967+01:00","labels":["ashep-workflow:simple"],"deleted_at":"2026-01-06T04:35:53.429967+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-tyv9","title":"label-workflow-test: Non-exclusion test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:57:13.672438+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:57:13.711134+01:00","deleted_at":"2026-01-06T15:57:13.711134+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-uiw","title":"label-workflow-test: HITL label read test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:35:54.237552+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:35:54.299213+01:00","labels":["ashep-hitl:manual-intervention"],"deleted_at":"2026-01-06T04:35:54.299213+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-uj0","title":"Agent Shepherd Fallback Agent System Implementation","description":"Problem Statement\nWhen running ashep quickstart, validation fails because policies require capabilities (testing, qa, review, architecture) that don't exist in synced OpenCode agents. This prevents new users from getting started immediately.\n\nSolution: Cascading Fallback Agent Hierarchy\nA three-tier fallback system that allows capabilities to map to existing real agents in OpenCode:\nPhase-Level (specific) → Policy-Level (policy-wide) → Global-Level (system-wide)\n\nKey concept: When a policy requires a capability that no agent has, the system falls back to a specified agent (e.g., build) to handle the task anyway.\n\nDesign Decisions Confirmed\n1. Configuration Structure\nconfig.yaml (Global Level):\nfallback:\n  enabled: true              # Master switch - if false, NO fallback anywhere\n  default_agent: build       # Default fallback agent for all capabilities\n  mappings:                 # Optional: global capability-specific mappings\n    review: summary\n    documentation: summary\n    architecture: plan\n\npolicies.yaml (Policy and Phase Levels):\npolicies:\n  simple:\n    fallback_enabled: true        # Inherits from global if not set\n    fallback_agent: build        # Inherits from global if not set\n    fallback_mappings:           # Optional: policy-specific mappings\n      review: summary\n    phases:\n      - name: test\n        capabilities: [testing]\n        # Phase-level override:\n        fallback_agent: general\n        # OR disable for this phase:\n        fallback_enabled: false\n\n2. Hierarchy Rules\n- Cascading: Phase-level overrides Policy-level overrides Global-level\n- Default inheritance: If a level doesn't specify settings, inherit from higher level\n- Disable: If fallback_enabled: false at any level, fallback is disabled for that level\n- Master switch: If config.fallback.enabled: false, NO fallback anywhere\n\n3. Mappings Explained\nmappings allows capability-specific fallback agents:\n- Without mappings: All missing capabilities use default_agent: build\n- With mappings: Specific capabilities use different agents:\n  - review: summary → Review tasks handled by summary agent\n  - architecture: plan → Architecture tasks handled by plan agent\n  - Everything else → Falls back to build\nWhy mappings?\n- Better agent matching for different work types\n- summary agent is better at review/documentation than build agent\n- plan agent is better at architecture than build agent\n- Still provides default fallback for anything else\n\n4. Confirmed Defaults\n- Default fallback agent: build (has: coding, refactoring, building)\n- Default enabled state: true (turned on for both config and policies)\n- Default mappings: Keep simple initially - only default_agent: build (users can add mappings later)\n- Backward compatibility: Treat as disabled if config doesn't have fallback fields\n\n5. Runtime Behavior\nAgent Selection Logic:\nfunction selectAgent(capability, policy, phase) {\n  // 1. Try to find agent with capability\n  let agent = getAgentsByCapability(capability);\n  \n  if (!agent) {\n    // 2. No agent has capability - use fallback\n    agent = getFallbackAgent(capability, policy, phase);\n    \n    if (agent) {\n      logger.info(`ℹ️ Using fallback agent '${agent.name}' for capability '${capability}'`);\n    }\n  }\n  \n  return agent;\n}\n\nfunction getFallbackAgent(capability, policy, phase) {\n  // Check cascading hierarchy:\n  // 1. Phase-level override?\n  if (phase.fallback_agent) return getAgent(phase.fallback_agent);\n  \n  // 2. Phase disabled?\n  if (phase.fallback_enabled === false) return null;\n  \n  // 3. Policy mappings?\n  if (policy.fallback_mappings?.[capability]) return getAgent(policy.fallback_mappings[capability]);\n  \n  // 4. Policy disabled?\n  if (policy.fallback_enabled === false) return null;\n  \n  // 5. Global mappings?\n  if (config.fallback?.mappings?.[capability]) return getAgent(config.fallback.mappings[capability]);\n  \n  // 6. Global disabled?\n  if (!config.fallback?.enabled) return null;\n  \n  // 7. Use policy or global default_agent\n  const fallbackId = policy.fallback_agent || config.fallback?.default_agent;\n  return fallbackId ? getAgent(fallbackId) : null;\n}\n\n6. Validation Updates\nValidator must:\n1. Check if fallback agents exist in OpenCode for all 3 levels\n2. Verify fallback agents are active\n3. Show info messages about which capabilities will use fallback\n4. Error if fallback enabled but agent doesn't exist or is inactive\n5. Pass validation when fallback covers missing capabilities\n\nExample validation output:\n✅ Main configuration: Valid\n✅ Policy definitions: Valid\n✅ Agent registry: Valid\nℹ️  Policy chain validation: Using fallback for 2 capabilities\n   • policies.yaml: default.test: Capability 'testing' handled by fallback agent 'Build Agent'\n   • policies.yaml: default.review: Capability 'review' handled by fallback agent 'Summary Agent'\n✅ Policy chain validation: Valid\n\nImplementation Plan\nPhase 1: Schema Updates\n1. Update config.schema.json:\n   - Add fallback object schema\n   - Include enabled (boolean), default_agent (string), mappings (object)\n   - Mark as optional for backward compatibility\n2. Update policies.schema.json:\n   - Add fallback_enabled (boolean, optional) to policy level\n   - Add fallback_agent (string, optional) to policy level\n   - Add fallback_mappings (object, optional) to policy level\n   - Add fallback_agent (string, optional) to phase level\n   - Add fallback_enabled (boolean, optional) to phase level\n\nPhase 2: Configuration Loading\n3. Update config.ts:\n   - Load and parse fallback section from config.yaml\n   - Provide default values (enabled: false, no mappings) if not present\n4. Update policy.ts:\n   - Parse fallback fields when loading policies\n   - Handle inheritance logic (policy inherits from global if not set)\n\nPhase 3: Validation\n5. Update policy-capability-validator.ts:\n   - Modify validateCapability() to check fallback hierarchy\n   - Add new validation function validateFallbackAgent()\n   - Update error messages to include fallback information\n   - Change severity: missing capability with valid fallback = info/warning (not error)\n   - Add error type for invalid fallback config (agent doesn't exist or inactive)\n\nPhase 4: Runtime Selection\n6. Update agent-registry.ts:\n   - Add getFallbackAgent(capability, policy, phase) function\n   - Integrate with selectAgent() to use fallback when needed\n   - Add logging when fallback is used\n\nPhase 5: CLI Updates\n7. Update cmdInit() in cli/index.ts:\n   - Add fallback section to default config.yaml:\n          fallback:\n       enabled: true\n       default_agent: build\n     \n8. Update cmdQuickstart() in cli/index.ts:\n   - Add explanation about fallback system\n   - Show which capabilities are using fallback\n   - Make it clear this is normal for first-time setup\n9. Update validation output in cmdValidatePolicyChain():\n   - Show fallback info clearly\n   - Distinguish between critical errors (no agent, no fallback) and fallback usage\n\nPhase 6: Documentation\n10. Update README.md:\n    - Add section explaining fallback system\n    - Include configuration examples\n    - Explain when and why to use fallback\n11. Update docs/config-config.md:\n    - Document fallback configuration section\n    - Provide examples of global and policy-level mappings\n    - Explain master switch behavior\n12. Update docs/policies-config.md:\n    - Document fallback fields at policy and phase level\n    - Show cascading hierarchy examples\n    - Explain disable functionality\n13. Update docs/architecture.md (if applicable):\n    - Explain fallback system in architecture overview\n    - Add fallback to workflow diagrams\n\nTesting Checklist\n- [ ] Schema validation accepts fallback configurations\n- [ ] Fallback disabled when not present in config (backward compatibility)\n- [ ] Global fallback works for all missing capabilities\n- [ ] Policy-level fallback overrides global\n- [ ] Phase-level fallback overrides policy and global\n- [ ] fallback_enabled: false disables fallback at that level\n- [ ] config.fallback.enabled: false disables all fallbacks\n- [ ] Validation passes when fallback covers missing capabilities\n- [ ] Validation errors when fallback agent doesn't exist\n- [ ] Validation errors when fallback agent is inactive\n- [ ] Runtime uses fallback agent when capability missing\n- [ ] Runtime logs when fallback is used\n- [ ] Mappings route capabilities to correct agents\n- [ ] Default configuration creates working system after quickstart\n\nFiles to Modify\n- .agent-shepherd/schemas/config.schema.json\n- .agent-shepherd/schemas/policies.schema.json\n- .agent-shepherd/src/core/config.ts\n- .agent-shepherd/src/core/policy.ts\n- .agent-shepherd/src/core/agent-registry.ts\n- .agent-shepherd/src/core/policy-capability-validator.ts\n- .agent-shepherd/src/core/policy-tree-visualizer.ts (may need updates to show fallback)\n- .agent-shepherd/src/cli/index.ts\n- .agent-shepherd/README.md\n- .agent-shepherd/docs/config-config.md\n- .agent-shepherd/docs/policies-config.md\n\nCurrent State\n- Problem: Validation fails in ashep quickstart due to missing capabilities\n- Solution: Cascading fallback agent system confirmed\n- All design decisions finalized and agreed upon\n- Ready to begin implementation","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-05T02:41:26.628174+01:00","updated_at":"2026-01-05T02:41:26.628174+01:00","labels":["another-test-label","ashep-hitl:","ashep-phase:","test-label"]}
{"id":"agent-shepherd-ull","title":"label-workflow-test: Exclusion test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:36:26.242561+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:36:26.283083+01:00","labels":["ashep-excluded"],"deleted_at":"2026-01-06T04:36:26.283083+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-ulqh","title":"label-workflow-test: HITL label set test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T16:00:25.708363+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T16:00:25.78719+01:00","labels":["ashep-hitl:approval"],"deleted_at":"2026-01-06T16:00:25.78719+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-unj","title":"label-workflow-test: Default workflow label test","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-06T04:42:30.215564+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:42:30.28038+01:00","labels":["ashep-workflow:default"],"deleted_at":"2026-01-06T04:42:30.28038+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"agent-shepherd-uq4","title":"Update policy-tree-visualizer.ts to show fallback","description":"File: .agent-shepherd/src/core/policy-tree-visualizer.ts\n\nTask: Update visualization to display fallback agent information in policy tree\n\nRequired Changes:\n\n1. Analyze current visualization structure to understand where to add fallback info\n\n2. Add fallback indicators to the visual representation:\n   - Show when a phase uses fallback\n   - Display which fallback agent is used\n   - Indicate fallback level (global, policy, phase)\n\n3. Example visualization enhancement:\n```\nPhase: test\n├─ Capability: testing\n│  ├─ Agent: Build Agent (fallback - global)\n└─ Timeout: 30m\n\nPhase: review\n├─ Capability: review\n│  ├─ Agent: Summary Agent (fallback - policy mapping)\n└─ Timeout: 15m\n```\n\n4. Add color coding or styling:\n   - Fallback agents shown in different color/style\n   - Indicate fallback level with icon or text\n   - Make fallback visually distinct from matched agents\n\n5. Update node data structure to include fallback info:\n```typescript\ninterface PhaseNode {\n  // ... existing properties\n  fallbackAgent?: string;\n  fallbackLevel?: 'global' | 'policy' | 'phase';\n  isFallback?: boolean;\n}\n```\n\n6. Ensure visualization handles all cases:\n   - No fallback needed (agent has capability)\n   - Fallback at global level\n   - Fallback at policy level\n   - Fallback at phase level\n   - Fallback disabled\n\nAcceptance Criteria:\n- [ ] Fallback info displayed in visualization\n- [ ] Fallback agents clearly indicated\n- [ ] Fallback level shown\n- [ ] Visual distinction between fallback and matched agents\n- [ ] All fallback cases handled\n- [ ] Node structure updated with fallback data\n- [ ] Visualization is clear and informative","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T02:44:34.428954+01:00","updated_at":"2026-01-05T03:14:33.63331+01:00","closed_at":"2026-01-05T03:14:33.63331+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-uq4","depends_on_id":"agent-shepherd-uj0","type":"parent-child","created_at":"2026-01-05T02:45:37.279716+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-uqs","title":"label-workflow-test: Full workflow lifecycle test","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-06T04:35:54.781842+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:35:55.160354+01:00","labels":["ashep-workflow:simple"],"deleted_at":"2026-01-06T04:35:55.160354+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"agent-shepherd-uyy","title":"Test excluded","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-05T15:39:52.328054+01:00","created_by":"tonyhartmann","updated_at":"2026-01-05T15:40:06.262193+01:00","labels":["ashep:excluded"],"deleted_at":"2026-01-05T15:40:06.262193+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-shepherd-v6i","title":"label-workflow-test: Non-exclusion test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:34:53.997193+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:54.036107+01:00","deleted_at":"2026-01-06T04:34:54.036107+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-veo","title":"label-workflow-test: HITL label set test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:34:53.530622+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:53.619852+01:00","labels":["ashep-hitl:approval"],"deleted_at":"2026-01-06T04:34:53.619852+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-vjb","title":"label-workflow-test: Exclusion test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:34:53.928072+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:53.967027+01:00","labels":["ashep-excluded"],"deleted_at":"2026-01-06T04:34:53.967027+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-w75","title":"label-workflow-test: Phase label remove test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:35:53.935436+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:35:54.086849+01:00","deleted_at":"2026-01-06T04:35:54.086849+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-wbs","title":"Update README.md with fallback system documentation","description":"File: .agent-shepherd/README.md\n\nTask: Add section explaining fallback system with configuration examples\n\nRequired Changes:\n\n1. Add new section \"Fallback Agent System\" after the Quick Start section\n\n2. Include in the new section:\n   - What the fallback system is and why it exists\n   - When and why to use fallback\n   - Basic configuration examples\n   - How to cascading hierarchy works\n   - Example use cases\n\n3. Example content structure:\n```markdown\n## Fallback Agent System\n\nWhen a policy requires a capability that no agent has, the fallback system allows\nyou to specify a default agent to handle the task anyway. This is especially useful\nfor getting started quickly with default agents.\n\n### When to Use Fallback\n\n- **First-time setup**: Get started immediately with default agents\n- **Testing workflows**: Test workflows before adding specialized agents\n- **Limited agent pool**: Use available agents for all capability requirements\n\n### Basic Configuration\n\nAdd to `.agent-shepherd/config/config.yaml`:\n\n```yaml\nfallback:\n  enabled: true\n  default_agent: build\n```\n\n### Cascading Hierarchy\n\nThe fallback system works on three levels:\n\n1. **Global Level** (config.yaml): System-wide default\n2. **Policy Level** (policies.yaml): Policy-specific override\n3. **Phase Level** (policies.yaml): Phase-specific override\n\nEach level can override the levels above it.\n\n### Advanced Configuration\n\nUse capability-specific mappings for better agent matching:\n\n```yaml\nfallback:\n  enabled: true\n  default_agent: build\n  mappings:\n    review: summary\n    architecture: plan\n    documentation: summary\n```\n\nSee [docs/config-config.md](docs/config-config.md) for detailed configuration options.\n```\n\n4. Link to detailed documentation:\n   - Link to docs/config-config.md for full config reference\n   - Link to docs/policies-config.md for policy-level configuration\n\nAcceptance Criteria:\n- [ ] New \"Fallback Agent System\" section added\n- [ ] Explains what and why clearly\n- [ ] Includes basic configuration example\n- [ ] Documents cascading hierarchy\n- [ ] Shows advanced configuration with mappings\n- [ ] Links to detailed documentation\n- [ ] Section is well-formatted and easy to read","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T02:44:34.408136+01:00","updated_at":"2026-01-05T03:18:03.15476+01:00","closed_at":"2026-01-05T03:18:03.15476+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-wbs","depends_on_id":"agent-shepherd-uj0","type":"parent-child","created_at":"2026-01-05T02:45:00.52337+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-wub","title":"label-workflow-test: HITL label clear test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:42:31.14018+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:42:31.303961+01:00","deleted_at":"2026-01-06T04:42:31.303961+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-wz4","title":"label-workflow-test: Explicit workflow label test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:36:24.78491+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:36:24.842255+01:00","labels":["ashep-workflow:simple"],"deleted_at":"2026-01-06T04:36:24.842255+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-xbal","title":"label-workflow-test: Batch label update test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:54:02.077428+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:54:02.187737+01:00","labels":["label2","label3"],"deleted_at":"2026-01-06T15:54:02.187737+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-xe6","title":"label-workflow-test: Non-exclusion test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:42:31.428702+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:42:31.468297+01:00","deleted_at":"2026-01-06T04:42:31.468297+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-xql","title":"Update cmdValidatePolicyChain() validation output","description":"File: .agent-shepherd/src/cli/index.ts\n\nTask: Update validation output to show fallback info clearly\n\nRequired Changes:\n\n1. Locate cmdValidatePolicyChain() function in src/cli/index.ts\n\n2. Update validation output to distinguish between:\n   - Critical errors (no agent, no fallback) - show as ERROR\n   - Fallback usage - show as INFO/WARNING\n   - Success with fallback - show as WARNING/INFO\n\n3. Example output format:\n```\n✅ Main configuration: Valid\n✅ Policy definitions: Valid\n✅ Agent registry: Valid\n\nℹ️  Policy chain validation: Using fallback for 2 capabilities\n   • policies.yaml: default.test: Capability 'testing' handled by fallback agent 'Build Agent'\n   • policies.yaml: default.review: Capability 'review' handled by fallback agent 'Summary Agent'\n\n✅ Policy chain validation: Valid\n```\n\n4. Collect fallback information from validation results:\n   - Parse validation results for fallback usage\n   - Group by policy and phase\n   - Count total capabilities using fallback\n\n5. Handle edge cases:\n   - No fallback needed (all capabilities have agents)\n   - Fallback errors (fallback agent doesn't exist)\n   - Mixed state (some capabilities use fallback, some have errors)\n\nAcceptance Criteria:\n- [ ] Validation output shows fallback info clearly\n- [ ] Critical errors and fallback usage are visually distinct\n- [ ] Output shows capability → fallback agent mapping\n- [ ] Counts total capabilities using fallback\n- [ ] Handles no fallback case gracefully\n- [ ] Shows errors for invalid fallback config\n- [ ] Mixed state handled correctly","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T02:44:34.394538+01:00","updated_at":"2026-01-05T17:08:30.527341+01:00","closed_at":"2026-01-05T17:08:30.527341+01:00","close_reason":"Closed","labels":["test:label"]}
{"id":"agent-shepherd-xv5t","title":"label-workflow-test: HITL label read test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T16:00:25.815971+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T16:00:25.874974+01:00","labels":["ashep-hitl:manual-intervention"],"deleted_at":"2026-01-06T16:00:25.874974+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-xvx","title":"refactor-directory-structure","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:00:10.425253+01:00","updated_at":"2025-12-21T03:01:25.922803+01:00","closed_at":"2025-12-21T03:01:25.922803+01:00","close_reason":"Completed"}
{"id":"agent-shepherd-xvx.1","title":"1. Directory Structure Creation","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:00:15.884816+01:00","updated_at":"2025-12-21T03:31:17.176475+01:00","closed_at":"2025-12-21T03:31:17.176475+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.1","depends_on_id":"agent-shepherd-xvx","type":"parent-child","created_at":"2025-12-21T02:00:15.885579+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.1.1","title":"1.1 Create .agent-shepherd/ directory structure with subdirectories (config/, bin/, src/, schemas/, tests/, docs/)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:00:21.107746+01:00","updated_at":"2025-12-21T02:52:10.247179+01:00","closed_at":"2025-12-21T02:52:10.247179+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.1.1","depends_on_id":"agent-shepherd-xvx.1","type":"parent-child","created_at":"2025-12-21T02:00:21.108603+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.2","title":"2. File Movement","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:00:26.299612+01:00","updated_at":"2025-12-21T03:31:17.176576+01:00","closed_at":"2025-12-21T03:31:17.176576+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.2","depends_on_id":"agent-shepherd-xvx","type":"parent-child","created_at":"2025-12-21T02:00:26.300428+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.2.1","title":"2.1 Move source files from src/ to .agent-shepherd/src/","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:00:31.790759+01:00","updated_at":"2025-12-21T02:53:28.772399+01:00","closed_at":"2025-12-21T02:53:28.772399+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.2.1","depends_on_id":"agent-shepherd-xvx.2","type":"parent-child","created_at":"2025-12-21T02:00:31.791521+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.2.2","title":"2.2 Move schema files from schemas/ to .agent-shepherd/schemas/","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:00:37.030352+01:00","updated_at":"2025-12-21T02:53:45.369823+01:00","closed_at":"2025-12-21T02:53:45.369823+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.2.2","depends_on_id":"agent-shepherd-xvx.2","type":"parent-child","created_at":"2025-12-21T02:00:37.031153+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.2.3","title":"2.3 Move test files from tests/ to .agent-shepherd/tests/","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:00:42.224707+01:00","updated_at":"2025-12-21T02:54:04.972294+01:00","closed_at":"2025-12-21T02:54:04.972294+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.2.3","depends_on_id":"agent-shepherd-xvx.2","type":"parent-child","created_at":"2025-12-21T02:00:42.225507+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.2.4","title":"2.4 Move docs from docs/ to .agent-shepherd/docs/","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:00:47.546953+01:00","updated_at":"2025-12-21T02:54:21.244615+01:00","closed_at":"2025-12-21T02:54:21.244615+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.2.4","depends_on_id":"agent-shepherd-xvx.2","type":"parent-child","created_at":"2025-12-21T02:00:47.548326+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.2.5","title":"2.5 Move README.md and package.json to .agent-shepherd/","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:00:52.834416+01:00","updated_at":"2025-12-21T02:54:37.142558+01:00","closed_at":"2025-12-21T02:54:37.142558+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.2.5","depends_on_id":"agent-shepherd-xvx.2","type":"parent-child","created_at":"2025-12-21T02:00:52.83549+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.3","title":"3. Import and Path Updates","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:00:58.131436+01:00","updated_at":"2025-12-21T03:31:17.176508+01:00","closed_at":"2025-12-21T03:31:17.176508+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.3","depends_on_id":"agent-shepherd-xvx","type":"parent-child","created_at":"2025-12-21T02:00:58.132623+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.3.1","title":"3.1 Update all import paths in source files to work from new locations","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:01:03.422802+01:00","updated_at":"2025-12-21T02:57:42.964223+01:00","closed_at":"2025-12-21T02:57:42.964223+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.3.1","depends_on_id":"agent-shepherd-xvx.3","type":"parent-child","created_at":"2025-12-21T02:01:03.424086+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.3.2","title":"3.2 Create path resolution utilities for dynamic path handling","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:01:08.747018+01:00","updated_at":"2025-12-21T02:55:08.176602+01:00","closed_at":"2025-12-21T02:55:08.176602+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.3.2","depends_on_id":"agent-shepherd-xvx.3","type":"parent-child","created_at":"2025-12-21T02:01:08.748097+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.4","title":"4. Build System Updates","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:01:14.06288+01:00","updated_at":"2025-12-21T03:31:17.207081+01:00","closed_at":"2025-12-21T03:31:17.207081+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.4","depends_on_id":"agent-shepherd-xvx","type":"parent-child","created_at":"2025-12-21T02:01:14.063933+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.4.1","title":"4.1 Update build system to output to .agent-shepherd/bin/ashep","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:01:19.461886+01:00","updated_at":"2025-12-21T02:58:02.175367+01:00","closed_at":"2025-12-21T02:58:02.175367+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.4.1","depends_on_id":"agent-shepherd-xvx.4","type":"parent-child","created_at":"2025-12-21T02:01:19.46309+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.4.2","title":"4.2 Modify package.json bin field to point to new location","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T02:01:24.771621+01:00","updated_at":"2025-12-21T02:01:24.771621+01:00","dependencies":[{"issue_id":"agent-shepherd-xvx.4.2","depends_on_id":"agent-shepherd-xvx.4","type":"parent-child","created_at":"2025-12-21T02:01:24.772674+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.4.3","title":"4.3 Update build scripts and validate build process","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:01:29.990643+01:00","updated_at":"2025-12-21T02:58:39.822109+01:00","closed_at":"2025-12-21T02:58:39.822109+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.4.3","depends_on_id":"agent-shepherd-xvx.4","type":"parent-child","created_at":"2025-12-21T02:01:29.991476+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.5","title":"5. CLI and Discovery Implementation","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:01:35.364181+01:00","updated_at":"2025-12-21T03:31:17.280757+01:00","closed_at":"2025-12-21T03:31:17.280757+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.5","depends_on_id":"agent-shepherd-xvx","type":"parent-child","created_at":"2025-12-21T02:01:35.365414+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.5.1","title":"5.1 Implement CLI discovery logic (findAgentShepherdDir function)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T02:01:40.685991+01:00","updated_at":"2025-12-21T02:01:40.685991+01:00","dependencies":[{"issue_id":"agent-shepherd-xvx.5.1","depends_on_id":"agent-shepherd-xvx.5","type":"parent-child","created_at":"2025-12-21T02:01:40.687088+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.5.2","title":"5.2 Update CLI entry point to use discovered paths","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T02:01:45.94781+01:00","updated_at":"2025-12-21T02:01:45.94781+01:00","dependencies":[{"issue_id":"agent-shepherd-xvx.5.2","depends_on_id":"agent-shepherd-xvx.5","type":"parent-child","created_at":"2025-12-21T02:01:45.948524+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.6","title":"6. Installation and Migration","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:01:51.256013+01:00","updated_at":"2025-12-21T03:31:17.378134+01:00","closed_at":"2025-12-21T03:31:17.378134+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.6","depends_on_id":"agent-shepherd-xvx","type":"parent-child","created_at":"2025-12-21T02:01:51.256992+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.6.1","title":"6.1 Modify ashep init command to create .agent-shepherd/ structure","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:01:56.470928+01:00","updated_at":"2025-12-21T02:59:02.210871+01:00","closed_at":"2025-12-21T02:59:02.210871+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.6.1","depends_on_id":"agent-shepherd-xvx.6","type":"parent-child","created_at":"2025-12-21T02:01:56.471661+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.6.2","title":"6.2 Update default file locations in config and core modules","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:27:43.851898+01:00","updated_at":"2025-12-21T02:59:17.702105+01:00","closed_at":"2025-12-21T02:59:17.702105+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.6.2","depends_on_id":"agent-shepherd-xvx.6","type":"parent-child","created_at":"2025-12-21T02:27:43.852581+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.6.3","title":"6.3 Add migration logic for existing installations","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:27:49.045882+01:00","updated_at":"2025-12-21T02:59:34.024196+01:00","closed_at":"2025-12-21T02:59:34.024196+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.6.3","depends_on_id":"agent-shepherd-xvx.6","type":"parent-child","created_at":"2025-12-21T02:27:49.04668+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.6.4","title":"6.4 Handle backward compatibility for existing installations","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:27:54.225217+01:00","updated_at":"2025-12-21T02:59:41.264193+01:00","closed_at":"2025-12-21T02:59:41.264193+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.6.4","depends_on_id":"agent-shepherd-xvx.6","type":"parent-child","created_at":"2025-12-21T02:27:54.226012+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.6.5","title":"6.5 Implement error handling for conflicting file locations","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:27:59.419865+01:00","updated_at":"2025-12-21T02:59:48.450494+01:00","closed_at":"2025-12-21T02:59:48.450494+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.6.5","depends_on_id":"agent-shepherd-xvx.6","type":"parent-child","created_at":"2025-12-21T02:27:59.420626+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.7","title":"7. Testing and Validation","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:28:04.620684+01:00","updated_at":"2025-12-21T03:31:17.469996+01:00","closed_at":"2025-12-21T03:31:17.469996+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.7","depends_on_id":"agent-shepherd-xvx","type":"parent-child","created_at":"2025-12-21T02:28:04.621579+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.7.1","title":"7.1 Update all test files to work with new import paths","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:28:10.064203+01:00","updated_at":"2025-12-21T02:59:59.048024+01:00","closed_at":"2025-12-21T02:59:59.048024+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.7.1","depends_on_id":"agent-shepherd-xvx.7","type":"parent-child","created_at":"2025-12-21T02:28:10.065021+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.7.2","title":"7.2 Create tests for CLI discovery functionality","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:28:15.24636+01:00","updated_at":"2025-12-21T03:00:14.306202+01:00","closed_at":"2025-12-21T03:00:14.306202+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.7.2","depends_on_id":"agent-shepherd-xvx.7","type":"parent-child","created_at":"2025-12-21T02:28:15.247175+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.7.3","title":"7.3 Test installation process creates correct structure","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:28:20.430588+01:00","updated_at":"2025-12-21T03:01:33.016442+01:00","closed_at":"2025-12-21T03:01:33.016442+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.7.3","depends_on_id":"agent-shepherd-xvx.7","type":"parent-child","created_at":"2025-12-21T02:28:20.431315+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.7.4","title":"7.4 Run full test suite and fix any failures","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:28:25.894184+01:00","updated_at":"2025-12-21T03:01:33.131827+01:00","closed_at":"2025-12-21T03:01:33.131827+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.7.4","depends_on_id":"agent-shepherd-xvx.7","type":"parent-child","created_at":"2025-12-21T02:28:25.894924+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.7.5","title":"7.5 Validate end-to-end workflow in new structure","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:28:31.095188+01:00","updated_at":"2025-12-21T03:01:33.237248+01:00","closed_at":"2025-12-21T03:01:33.237248+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.7.5","depends_on_id":"agent-shepherd-xvx.7","type":"parent-child","created_at":"2025-12-21T02:28:31.095919+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.7.6","title":"7.6 Test backward compatibility and migration","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:28:36.282313+01:00","updated_at":"2025-12-21T03:01:33.381329+01:00","closed_at":"2025-12-21T03:01:33.381329+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.7.6","depends_on_id":"agent-shepherd-xvx.7","type":"parent-child","created_at":"2025-12-21T02:28:36.283203+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.8","title":"8. Documentation Updates","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:28:41.476038+01:00","updated_at":"2025-12-21T03:01:33.489308+01:00","closed_at":"2025-12-21T03:01:33.489308+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.8","depends_on_id":"agent-shepherd-xvx","type":"parent-child","created_at":"2025-12-21T02:28:41.476817+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.8.1","title":"8.1 Update documentation to reference new file locations","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:28:46.674127+01:00","updated_at":"2025-12-21T03:01:33.603699+01:00","closed_at":"2025-12-21T03:01:33.603699+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.8.1","depends_on_id":"agent-shepherd-xvx.8","type":"parent-child","created_at":"2025-12-21T02:28:46.674988+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xvx.8.2","title":"8.2 Update any hardcoded paths in docs or code","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:28:51.866098+01:00","updated_at":"2025-12-21T03:01:33.712943+01:00","closed_at":"2025-12-21T03:01:33.712943+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-xvx.8.2","depends_on_id":"agent-shepherd-xvx.8","type":"parent-child","created_at":"2025-12-21T02:28:51.866816+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-xyo","title":"label-workflow-test: Empty label ops test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:32:31.160092+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:31.255745+01:00","deleted_at":"2026-01-06T04:32:31.255745+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-ybi","title":"Update docs/policies-config.md with fallback fields","description":"File: .agent-shepherd/docs/policies-config.md\n\nTask: Document fallback fields at policy and phase level with hierarchy examples\n\nRequired Changes:\n\n1. Add new section \"Fallback Agent Configuration\" in the policies documentation\n\n2. Document policy-level fallback fields:\n   - fallback_enabled (boolean, optional): Enable/disable for this policy\n   - fallback_agent (string, optional): Fallback agent for this policy\n   - fallback_mappings (object, optional): Capability-specific mappings\n\n3. Document phase-level fallback fields:\n   - fallback_agent (string, optional): Override fallback agent for this phase\n   - fallback_enabled (boolean, optional): Disable fallback for this phase\n\n4. Provide cascading hierarchy examples:\n\nExample 1: Policy Override Global\n```yaml\n# config.yaml\nfallback:\n  enabled: true\n  default_agent: build\n\n# policies.yaml\npolicies:\n  my-policy:\n    fallback_enabled: true\n    fallback_agent: summary  # Override global default\n```\n\nExample 2: Phase Override Policy\n```yaml\npolicies:\n  my-policy:\n    fallback_enabled: true\n    fallback_agent: summary\n    phases:\n      - name: test\n        capabilities: [testing]\n        fallback_agent: general  # Override policy default\n```\n\nExample 3: Disable Fallback at Phase Level\n```yaml\npolicies:\n  my-policy:\n    fallback_enabled: true\n    fallback_agent: summary\n    phases:\n      - name: review\n        capabilities: [review]\n        fallback_enabled: false  # No fallback for this phase\n```\n\n5. Explain disable functionality:\n   - fallback_enabled: false at any level disables fallback\n   - Cascading: Phase disables → No fallback for this phase\n   - Cascading: Policy disables → No fallback for any phase in this policy\n   - Cascading: Global disables → No fallback anywhere\n\n6. Add inheritance rules:\n   - If not specified, inherit from parent level\n   - Explicit false always disables\n   - Explicit value always overrides inheritance\n\nAcceptance Criteria:\n- [ ] Fallback section added to policies documentation\n- [ ] Policy-level fields documented\n- [ ] Phase-level fields documented\n- [ ] Cascading hierarchy examples provided\n- [ ] Disable functionality explained clearly\n- [ ] Inheritance rules documented\n- [ ] Examples are clear and well-commented\n- [ ] Documentation is comprehensive","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T02:44:34.419129+01:00","updated_at":"2026-01-05T03:23:47.512091+01:00","closed_at":"2026-01-05T03:23:47.512091+01:00","close_reason":"Completed","dependencies":[{"issue_id":"agent-shepherd-ybi","depends_on_id":"agent-shepherd-uj0","type":"parent-child","created_at":"2026-01-05T02:45:00.599749+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-ycj","title":"label-workflow-test: Default workflow label test","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-06T04:34:52.865141+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:52.922214+01:00","labels":["ashep-workflow:default"],"deleted_at":"2026-01-06T04:34:52.922214+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"agent-shepherd-ydmu","title":"label-workflow-test: HITL label set test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:54:01.082614+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:54:01.157223+01:00","labels":["ashep-hitl:approval"],"deleted_at":"2026-01-06T15:54:01.157223+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-yje","title":"label-workflow-test: Batch label update test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:34:54.575475+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:54.696791+01:00","labels":["label2","label3"],"deleted_at":"2026-01-06T04:34:54.696791+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-yr7k","title":"label-workflow-test: Explicit workflow label test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:57:12.445995+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:57:12.506969+01:00","labels":["ashep-workflow:simple"],"deleted_at":"2026-01-06T15:57:12.506969+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-ys9o","title":"label-workflow-test: Full workflow lifecycle test","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-06T15:57:13.878326+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:57:14.233253+01:00","labels":["ashep-workflow:simple"],"deleted_at":"2026-01-06T15:57:14.233253+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"agent-shepherd-yvn","title":"label-workflow-test: Batch label update test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:42:32.064678+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:42:32.189371+01:00","labels":["label2","label3"],"deleted_at":"2026-01-06T04:42:32.189371+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-yykg","title":"label-workflow-test: Batch label update test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:57:14.262562+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:57:14.377255+01:00","labels":["label2","label3"],"deleted_at":"2026-01-06T15:57:14.377255+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-z47","title":"label-workflow-test: Phase label set test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:42:30.504306+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:42:30.590804+01:00","labels":["ashep-phase:implement"],"deleted_at":"2026-01-06T04:42:30.590804+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-z7i","title":"label-workflow-test: No matching policy test","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2026-01-06T04:24:42.951993+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:32:28.992691+01:00","deleted_at":"2026-01-06T04:32:28.992691+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"epic"}
{"id":"agent-shepherd-zcze","title":"label-workflow-test: Non-exclusion test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:58:05.720674+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:58:05.763011+01:00","deleted_at":"2026-01-06T15:58:05.763011+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-zhj","title":"Agent Shepherd Label System - Complete Implementation","description":"## Epic Overview\n\nThis epic implements a comprehensive label-based workflow orchestration system for Agent Shepherd using Beads labels.\n\n### Core Features\n\n1. **Trigger System** - Automatic workflow selection via `ashep-workflow:` labels and issue type matching\n2. **Phase Tracking** - Track current phase via `ashep-phase:` labels\n3. **Status/HITL Markers** - Mark human-in-the-loop states via `ashep-hitl:` labels\n4. **Exclusion Control** - Exclude issues via `ashep-excluded` label\n\n### Design Summary\n\n**Label Naming Convention:**\n- `ashep-workflow:\u003cname\u003e` - Explicit workflow assignment\n- `ashep-phase:\u003cname\u003e` - Current workflow phase\n- `ashep-excluded` - Exclusion marker\n- `ashep-hitl:\u003creason\u003e` - Human-in-the-loop state\n\n**Trigger System Priority:**\n1. Explicit workflow label (`ashep-workflow:xxx`) → Direct assignment\n2. Issue type matching → Policy with matching issue_types array (highest priority wins)\n3. Default policy → Fallback\n\n**HITL Reason Design:**\n- Predefined reasons: approval, manual-intervention, timeout, error, review-request\n- Custom reasons allowed with alphanumeric-dash-underscore validation\n- Configurable via `config.hitl.allowed_reasons`\n\n### Implementation Scope\n\n- **Total Phases:** 6\n- **Files Modified:** 13 files\n- **New Code:** ~1500 lines\n- **New Test Files:** 6 files (~830 lines)\n- **Documentation Updates:** 5 files\n\n### Dependencies\n\nAll phases must be completed sequentially:\n- Phase 1 → Phase 2 → Phase 3 → Phase 4 → Phase 5 → Phase 6\n\n---\n\n## Scratchpad\n\n**Implementation Phases:**\n\n**Phase 1: Infrastructure - Foundation (~4 hours)**\n- Add BeadsIssue.labels field\n- Implement getIssueLabels(), updateIssueLabels(), addIssueLabel(), removeIssueLabel()\n- Update getIssue() and getReadyIssues() to include labels\n- Write unit tests for label functions\n- Files: beads.ts, tests/beads-labels.test.ts\n\n**Phase 2: Schema \u0026 Configuration (~3 hours)**\n- Add workflow section to config.schema.json (invalid_label_strategy)\n- Add hitl section to config.schema.json (allowed_reasons, allow_custom, custom_validation)\n- Add issue_types and priority fields to policies.schema.json\n- Update cmdInit() to add new config sections to default config\n- Write config loading tests\n- Files: config.schema.json, policies.schema.json, src/cli/index.ts\n\n**Phase 3: Trigger System (~6 hours)**\n- Update PolicyConfig interface with issue_types and priority\n- Implement matchPolicy() method in PolicyEngine\n- Update processIssue() to use matchPolicy() instead of getDefaultPolicyName()\n- Implement invalid workflow label handling based on config\n- Implement priority-based selection with tie-breaking (config order)\n- Write unit tests for trigger system\n- Files: policy.ts, tests/trigger-system.test.ts\n\n**Phase 4: Phase \u0026 HITL Tracking (~6 hours)**\n- Implement setPhaseLabel(), removePhaseLabels(), hasPhaseLabel()\n- Implement setHITLLabel(), clearHITLLabels(), hasHITLLabel()\n- Implement validateHITLReason() in policy.ts\n- Update processIssue() to read phase labels and resume from current phase\n- Update applyTransition() to manage phase labels on transitions\n- Update applyTransition() to set/clear HITL labels\n- Add approval note generation when HITL triggered\n- Write unit tests for phase and HITL tracking\n- Files: beads.ts, policy.ts, worker-engine.ts, tests/phase-tracking.test.ts, tests/hitl-tracking.test.ts\n\n**Phase 5: Exclusion Control (~2 hours)**\n- Implement hasExcludedLabel() helper\n- Update getEligibleIssues() to filter by label (not text)\n- Remove excluded_tags from WorkerConfig interface\n- Update constructor to remove excluded_tags\n- Write unit tests for exclusion logic\n- Files: beads.ts, worker-engine.ts, tests/exclusion-control.test.ts\n\n**Phase 6: Documentation \u0026 Integration Tests (~5 hours)**\n- Update docs/policies-config.md with trigger system\n- Remove deprecated trigger fields from documentation\n- Update docs/config-config.md with workflow and hitl sections\n- Update docs/architecture.md with label system\n- Update README.md with label usage examples\n- Write integration tests for full workflow\n- Update AGENTS.md with new label conventions\n- Files: policies-config.md, config-config.md, architecture.md, README.md, AGENTS.md, tests/integration/label-workflow.test.ts\n\n**Testing Strategy:**\n- Unit Tests: 90%+ coverage for new code\n- Integration Tests: 5 end-to-end workflow scenarios\n- Manual Testing: 7-step checklist\n\n**Breaking Changes:**\n- Removed: excluded_tags from WorkerConfig\n- Behavior Change: Issues filtered by label, not text content\n- Schema Changes: New fields in config and policies schemas\n\n**Migration Guide:**\n1. Update any issues using text-based exclusion to use ashep-excluded label\n2. Remove excluded_tags from config.yaml\n3. Run `ashep validate` to check configuration\n4. Review updated policies.yaml for trigger system\n5. Test workflow with a sample issue\n\n---\n\n## Execution Note\n\nWhen assigned this epic, consume the overall context and select the next available child issue to work on, rather than working on the epic directly.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-05T17:24:55.676336+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:37:05.058217+01:00","closed_at":"2026-01-06T04:37:05.058217+01:00","close_reason":"All 6 phases completed successfully. Label-based workflow system fully implemented with documentation and tests."}
{"id":"agent-shepherd-zhj.1","title":"Phase 1: Infrastructure - Foundation","description":"Add label fetching and management capabilities to Beads integration.\n\n**Tasks:**\n1.1 Update BeadsIssue interface to include labels field\n1.2 Implement getIssueLabels() function\n1.3 Implement updateIssueLabels() function  \n1.4 Implement addIssueLabel() helper\n1.5 Implement removeIssueLabel() helper\n1.6 Update getIssue() to include labels\n1.7 Update getReadyIssues() to include labels\n1.8 Write unit tests for label functions\n\n**Files:**\n- src/core/beads.ts (+150 lines)\n- tests/beads-labels.test.ts (new file, +200 lines)\n\n**Effort:** ~4 hours | **Risk:** Low\n\n**Dependencies:** None (first phase)\n\n**Acceptance Criteria:**\n- [ ] BeadsIssue.labels field exists\n- [ ] getIssueLabels() returns array of label strings\n- [ ] updateIssueLabels() adds and removes labels correctly\n- [ ] getIssue() includes labels in returned object\n- [ ] getReadyIssues() includes labels for all issues\n- [ ] All label functions handle errors gracefully\n- [ ] Unit tests cover all label functions","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T17:25:25.30499+01:00","created_by":"tonyhartmann","updated_at":"2026-01-05T17:43:50.241984+01:00","closed_at":"2026-01-05T17:43:50.241984+01:00","close_reason":"Completed all Phase 1 tasks:\n- Added labels field to BeadsIssue interface\n- Implemented getIssueLabels, updateIssueLabels, addIssueLabel, removeIssueLabel functions\n- Updated getIssue and getReadyIssues to include labels\n- Created comprehensive unit tests in tests/beads-labels.test.ts\n- All tests passing (13 tests)\n- Lint and type-check successful","dependencies":[{"issue_id":"agent-shepherd-zhj.1","depends_on_id":"agent-shepherd-zhj","type":"parent-child","created_at":"2026-01-05T17:25:25.305662+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-zhj.1.1","title":"1.1 Update BeadsIssue interface to include labels field","description":"Add the  field to the BeadsIssue interface in src/core/beads.ts.\n\nThis field will hold the array of Beads labels associated with each issue.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T17:25:34.420464+01:00","created_by":"tonyhartmann","updated_at":"2026-01-05T17:43:16.764066+01:00","closed_at":"2026-01-05T17:43:16.764066+01:00","close_reason":"Added labels field to BeadsIssue interface","dependencies":[{"issue_id":"agent-shepherd-zhj.1.1","depends_on_id":"agent-shepherd-zhj.1","type":"parent-child","created_at":"2026-01-05T17:25:34.421114+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-zhj.1.2","title":"1.2 Implement getIssueLabels function","description":"Implement getIssueLabels(issueId: string): Promise\u003cstring[]\u003e function that fetches all labels for a given issue using the  command and returns an array of label strings.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T17:25:38.100654+01:00","created_by":"tonyhartmann","updated_at":"2026-01-05T17:43:20.446305+01:00","closed_at":"2026-01-05T17:43:20.446305+01:00","close_reason":"Implemented getIssueLabels function using bd label list command","dependencies":[{"issue_id":"agent-shepherd-zhj.1.2","depends_on_id":"agent-shepherd-zhj.1","type":"parent-child","created_at":"2026-01-05T17:25:38.106271+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-zhj.1.3","title":"1.3 Implement updateIssueLabels function","description":"Implement updateIssueLabels(issueId: string, addLabels: string[], removeLabels: string[]): Promise\u003cvoid\u003e function that adds and removes labels using  and  commands.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T17:26:01.920581+01:00","created_by":"tonyhartmann","updated_at":"2026-01-05T17:43:24.317617+01:00","closed_at":"2026-01-05T17:43:24.317617+01:00","close_reason":"Implemented updateIssueLabels function using addIssueLabel and removeIssueLabel","dependencies":[{"issue_id":"agent-shepherd-zhj.1.3","depends_on_id":"agent-shepherd-zhj.1","type":"parent-child","created_at":"2026-01-05T17:26:01.930091+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-zhj.1.4","title":"1.4 Implement addIssueLabel helper","description":"Implement addIssueLabel(issueId: string, label: string): Promise\u003cvoid\u003e function that adds a single label using bd update command.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T17:26:05.53831+01:00","created_by":"tonyhartmann","updated_at":"2026-01-05T17:43:32.481416+01:00","closed_at":"2026-01-05T17:43:32.481416+01:00","close_reason":"Implemented addIssueLabel helper using bd label add command","dependencies":[{"issue_id":"agent-shepherd-zhj.1.4","depends_on_id":"agent-shepherd-zhj.1","type":"parent-child","created_at":"2026-01-05T17:26:05.542607+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-zhj.1.5","title":"1.7 Update getReadyIssues to include labels","description":"Modify getReadyIssues() function in beads.ts to call getIssueLabels() for each issue and populate the labels field in returned BeadsIssue objects.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T17:26:26.054716+01:00","created_by":"tonyhartmann","updated_at":"2026-01-05T17:43:36.715869+01:00","closed_at":"2026-01-05T17:43:36.715869+01:00","close_reason":"Updated getReadyIssues to include labels by calling getIssueLabels for each issue","dependencies":[{"issue_id":"agent-shepherd-zhj.1.5","depends_on_id":"agent-shepherd-zhj.1","type":"parent-child","created_at":"2026-01-05T17:26:26.065372+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-zhj.1.7","title":"1.8 Write unit tests for label functions","description":"Create tests/beads-labels.test.ts with comprehensive unit tests for all new label functions including getIssueLabels, updateIssueLabels, addIssueLabel, removeIssueLabel, and verify that getIssue and getReadyIssues include labels.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T17:26:30.839765+01:00","created_by":"tonyhartmann","updated_at":"2026-01-05T17:43:40.59034+01:00","closed_at":"2026-01-05T17:43:40.59034+01:00","close_reason":"Created comprehensive unit tests for all label functions in tests/beads-labels.test.ts","dependencies":[{"issue_id":"agent-shepherd-zhj.1.7","depends_on_id":"agent-shepherd-zhj.1","type":"parent-child","created_at":"2026-01-05T17:26:30.843879+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-zhj.1.8","title":"1.6 Update getIssue to include labels","description":"Modify getIssue function in beads.ts to call getIssueLabels and populate the labels field in returned BeadsIssue object.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T17:28:27.95181+01:00","created_by":"tonyhartmann","updated_at":"2026-01-05T17:43:44.919579+01:00","closed_at":"2026-01-05T17:43:44.919579+01:00","close_reason":"Updated getIssue to include labels by calling getIssueLabels","dependencies":[{"issue_id":"agent-shepherd-zhj.1.8","depends_on_id":"agent-shepherd-zhj.1","type":"parent-child","created_at":"2026-01-05T17:28:27.952606+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-zhj.2","title":"Phase 2: Schema and Configuration","description":"Add trigger system and HITL configuration to schemas and default config.\n\n**Tasks:**\n2.1 Update config.schema.json with workflow section\n2.2 Update config.schema.json with hitl section\n2.3 Update policies.schema.json with issue_types and priority fields\n2.4 Remove deprecated trigger fields from policies.schema.json\n2.5 Update cmdInit to add workflow section to default config\n2.6 Update cmdInit to add hitl section to default config\n2.7 Write config loading tests\n\n**Files:**\n- schemas/config.schema.json (+50 lines)\n- schemas/policies.schema.json (+20 lines)\n- src/cli/index.ts (+30 lines)\n\n**Effort:** ~3 hours | **Risk:** Low\n\n**Dependencies:** Phase 1\n\n**Acceptance Criteria:**\n- [ ] config.schema.json includes workflow section\n- [ ] config.schema.json includes hitl section\n- [ ] policies.schema.json includes issue_types field\n- [ ] policies.schema.json includes priority field\n- [ ] cmdInit adds workflow and hitl to default config\n- [ ] Config validation accepts all new fields\n- [ ] Deprecated trigger fields handled appropriately","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T17:26:36.243322+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T01:51:56.019686+01:00","closed_at":"2026-01-06T01:51:56.019686+01:00","close_reason":"Completed all Phase 2 tasks: Added workflow and hitl sections to config.schema.json, added issue_types and priority fields to policies.schema.json, updated cmdInit to add workflow and hitl to default config, wrote config loading tests with 9 passing tests","dependencies":[{"issue_id":"agent-shepherd-zhj.2","depends_on_id":"agent-shepherd-zhj","type":"parent-child","created_at":"2026-01-05T17:26:36.247421+01:00","created_by":"daemon"},{"issue_id":"agent-shepherd-zhj.2","depends_on_id":"agent-shepherd-zhj.1","type":"blocks","created_at":"2026-01-05T17:28:53.051704+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-zhj.2.1","title":"2.2 Update config.schema.json with hitl section","description":"Add hitl configuration section to config.schema.json with allowed_reasons.predefined array, allow_custom boolean, and custom_validation enum (none, alphanumeric, alphanumeric-dash-underscore).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T17:27:16.705826+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T01:44:58.587178+01:00","closed_at":"2026-01-06T01:44:58.587178+01:00","close_reason":"Added workflow and hitl sections to config.schema.json with invalid_label_strategy and allowed_reasons configuration","dependencies":[{"issue_id":"agent-shepherd-zhj.2.1","depends_on_id":"agent-shepherd-zhj.2","type":"parent-child","created_at":"2026-01-05T17:27:16.715979+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-zhj.2.2","title":"2.3 Update policies.schema.json with issue_types and priority fields","description":"Add issue_types array field and priority integer field (1-100, default 50) to policyConfig definition in policies.schema.json.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T17:27:27.540404+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T01:45:23.153507+01:00","closed_at":"2026-01-06T01:45:23.153507+01:00","close_reason":"Added issue_types array and priority integer fields to policyConfig definition in policies.schema.json","dependencies":[{"issue_id":"agent-shepherd-zhj.2.2","depends_on_id":"agent-shepherd-zhj.2","type":"parent-child","created_at":"2026-01-05T17:27:27.541155+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-zhj.2.3","title":"2.6 Update cmdInit to add hitl section to default config","description":"Modify the cmdInit function in src/cli/index.ts to include the hitl configuration section with default allowed_reasons settings when creating new config.yaml files.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T17:27:33.143852+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T01:46:06.309074+01:00","closed_at":"2026-01-06T01:46:06.309074+01:00","close_reason":"Updated cmdInit to add both workflow and hitl sections to default config with appropriate defaults","dependencies":[{"issue_id":"agent-shepherd-zhj.2.3","depends_on_id":"agent-shepherd-zhj.2","type":"parent-child","created_at":"2026-01-05T17:27:33.153977+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-zhj.3","title":"Phase 3: Trigger System","description":"Implement automatic workflow selection based on labels and issue types.\n\n**Tasks:**\n3.1 Update PolicyConfig interface with issue_types and priority\n3.2 Implement matchPolicy method in PolicyEngine\n3.3 Update processIssue to use matchPolicy instead of getDefaultPolicyName\n3.4 Implement invalid workflow label handling based on config\n3.5 Implement priority-based selection with tie-breaking (config order)\n3.6 Write unit tests for trigger system\n\n**Files:**\n- src/core/policy.ts (+100 lines)\n- tests/trigger-system.test.ts (new file, +150 lines)\n\n**Effort:** ~6 hours | **Risk:** Medium\n\n**Dependencies:** Phase 2\n\n**Acceptance Criteria:**\n- [ ] matchPolicy method exists and works correctly\n- [ ] Explicit workflow label takes precedence\n- [ ] Issue type matching works correctly\n- [ ] Priority-based selection works\n- [ ] Config order breaks priority ties correctly\n- [ ] Default policy used when no match\n- [ ] Invalid workflow label handled according to config strategy\n- [ ] Worker Engine uses matchPolicy instead of getDefaultPolicyName\n- [ ] All unit tests passing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T17:26:41.610552+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T02:23:12.73941+01:00","closed_at":"2026-01-06T02:23:12.73941+01:00","close_reason":"Phase 3: Trigger System completed. All acceptance criteria met:\n- matchPolicy method exists and works correctly\n- Explicit workflow label takes precedence\n- Issue type matching works correctly\n- Priority-based selection works\n- Config order breaks priority ties correctly\n- Default policy used when no match\n- Invalid workflow label handled according to config strategy\n- Worker Engine uses matchPolicy instead of getDefaultPolicyName\n- All unit tests passing (13 tests)","dependencies":[{"issue_id":"agent-shepherd-zhj.3","depends_on_id":"agent-shepherd-zhj","type":"parent-child","created_at":"2026-01-05T17:26:41.614586+01:00","created_by":"daemon"},{"issue_id":"agent-shepherd-zhj.3","depends_on_id":"agent-shepherd-zhj.2","type":"blocks","created_at":"2026-01-05T17:28:53.04256+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-zhj.3.1","title":"3.1 Update PolicyConfig interface with issue_types and priority","description":"Add issue_types string array and priority number fields to the PolicyConfig interface in src/core/policy.ts.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T17:27:36.631932+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T02:23:02.693281+01:00","closed_at":"2026-01-06T02:23:02.693281+01:00","close_reason":"Closed via update","dependencies":[{"issue_id":"agent-shepherd-zhj.3.1","depends_on_id":"agent-shepherd-zhj.3","type":"parent-child","created_at":"2026-01-05T17:27:36.650704+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-zhj.3.2","title":"3.5 Implement priority-based selection with tie-breaking","description":"Implement sorting logic in matchPolicy to select policies by highest priority, using config order to break ties when multiple policies have same priority.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T17:27:43.025283+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T02:23:02.696602+01:00","closed_at":"2026-01-06T02:23:02.696602+01:00","close_reason":"Closed via update","dependencies":[{"issue_id":"agent-shepherd-zhj.3.2","depends_on_id":"agent-shepherd-zhj.3","type":"parent-child","created_at":"2026-01-05T17:27:43.030783+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-zhj.3.4","title":"3.2 Implement matchPolicy method in PolicyEngine","description":"Implement matchPolicy(issue: BeadsIssue): string method in PolicyEngine class that checks for explicit workflow label, matches by issue type using priority, and falls back to default policy.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T17:27:43.031769+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T02:23:02.701587+01:00","closed_at":"2026-01-06T02:23:02.701587+01:00","close_reason":"Closed via update","dependencies":[{"issue_id":"agent-shepherd-zhj.3.4","depends_on_id":"agent-shepherd-zhj.3","type":"parent-child","created_at":"2026-01-05T17:27:43.032238+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-zhj.4","title":"Phase 4: Phase and HITL Tracking","description":"Track workflow phases and human-in-the-loop states via labels.\n\n**Tasks:**\n4.1 Implement setPhaseLabel function\n4.2 Implement removePhaseLabels helper\n4.3 Implement setHITLLabel function\n4.4 Implement clearHITLLabels function\n4.5 Implement validateHITLReason function\n4.6 Update processIssue to read phase labels and resume from current phase\n4.7 Update applyTransition to manage phase labels on transitions\n4.8 Update applyTransition to set/clear HITL labels\n4.9 Add approval note generation when HITL triggered\n4.10 Write unit tests for phase and HITL tracking\n\n**Files:**\n- src/core/beads.ts (additional changes)\n- src/core/policy.ts (additional changes)\n- src/core/worker-engine.ts (+80 lines)\n- tests/phase-tracking.test.ts (new file, +120 lines)\n- tests/hitl-tracking.test.ts (new file, +100 lines)\n\n**Effort:** ~6 hours | **Risk:** Medium\n\n**Dependencies:** Phase 3\n\n**Acceptance Criteria:**\n- [ ] setPhaseLabel sets correct label format\n- [ ] removePhaseLabels removes all phase labels\n- [ ] setHITLLabel sets correct label format\n- [ ] clearHITLLabels removes all HITL labels\n- [ ] validateHITLReason validates predefined reasons\n- [ ] validateHITLReason validates custom reasons based on config\n- [ ] processIssue reads phase label and resumes correctly\n- [ ] applyTransition updates phase label on advance\n- [ ] applyTransition keeps phase label on retry\n- [ ] applyTransition sets HITL label on approval block\n- [ ] applyTransition removes all tracking labels on close\n- [ ] Approval note generated when HITL triggered\n- [ ] All unit tests passing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T17:26:59.323371+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T03:11:46.489037+01:00","closed_at":"2026-01-06T03:11:46.489037+01:00","close_reason":"All tasks completed - Phase 4: Phase and HITL Tracking implementation done","dependencies":[{"issue_id":"agent-shepherd-zhj.4","depends_on_id":"agent-shepherd-zhj","type":"parent-child","created_at":"2026-01-05T17:26:59.332451+01:00","created_by":"daemon"},{"issue_id":"agent-shepherd-zhj.4","depends_on_id":"agent-shepherd-zhj.3","type":"blocks","created_at":"2026-01-05T17:28:52.957742+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-zhj.4.1","title":"4.3 Implement setHITLLabel function","description":"Implement setHITLLabel(issueId: string, reason: string): Promise\u003cvoid\u003e function that adds ashep-hitl:reason label to an issue.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T17:27:49.462378+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T03:11:22.944174+01:00","closed_at":"2026-01-06T03:11:22.944174+01:00","close_reason":"Implemented setHITLLabel function in beads.ts","dependencies":[{"issue_id":"agent-shepherd-zhj.4.1","depends_on_id":"agent-shepherd-zhj.4","type":"parent-child","created_at":"2026-01-05T17:27:49.472428+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-zhj.4.2","title":"4.5 Implement validateHITLReason function","description":"Implement validateHITLReason(reason: string, config: HitlConfig): boolean function in policy.ts that validates HITL reasons against predefined list and custom validation rules.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T17:27:54.921333+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T03:11:22.944235+01:00","closed_at":"2026-01-06T03:11:22.944235+01:00","close_reason":"Implemented validateHITLReason function in policy.ts","dependencies":[{"issue_id":"agent-shepherd-zhj.4.2","depends_on_id":"agent-shepherd-zhj.4","type":"parent-child","created_at":"2026-01-05T17:27:54.932061+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-zhj.4.3","title":"4.8 Update applyTransition to set/clear HITL labels","description":"Modify applyTransition in WorkerEngine to set ashep-hitl: label when blocking for approval and clear HITL labels when resuming or closing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T17:28:02.339789+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T03:11:23.043426+01:00","closed_at":"2026-01-06T03:11:23.043426+01:00","close_reason":"Updated applyTransition to set/clear HITL labels in worker-engine.ts","dependencies":[{"issue_id":"agent-shepherd-zhj.4.3","depends_on_id":"agent-shepherd-zhj.4","type":"parent-child","created_at":"2026-01-05T17:28:02.351488+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-zhj.5","title":"Phase 5: Exclusion Control","description":"Exclude issues from processing via ashep-excluded label.\n\n**Tasks:**\n5.1 Implement hasExcludedLabel helper\n5.2 Update getEligibleIssues to filter by label (not text)\n5.3 Remove excluded_tags from WorkerConfig interface\n5.4 Update constructor to remove excluded_tags\n5.5 Write unit tests for exclusion logic\n\n**Files:**\n- src/core/beads.ts (additional changes)\n- src/core/worker-engine.ts (additional changes)\n- tests/exclusion-control.test.ts (new file, +60 lines)\n\n**Effort:** ~2 hours | **Risk:** Low\n\n**Dependencies:** Phase 4\n\n**Acceptance Criteria:**\n- [ ] hasExcludedLabel correctly identifies excluded issues\n- [ ] getEligibleIssues filters by label (not text)\n- [ ] excluded_tags removed from WorkerConfig\n- [ ] Constructor does not use excluded_tags\n- [ ] Excluded issues are skipped with log message\n- [ ] Unit tests passing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T17:27:03.982728+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T03:34:34.364027+01:00","closed_at":"2026-01-06T03:34:34.364027+01:00","close_reason":"Completed all tasks:\n- Added hasExcludedLabel helper function in beads.ts\n- Updated getEligibleIssues to filter by ashep-excluded label instead of text matching\n- Removed excluded_tags from WorkerConfig interface\n- Updated constructor to remove excluded_tags usage\n- Created comprehensive unit tests (9 tests passing)\n- All tests passing (118 pass, 1 pre-existing failure)\n- Lint and type-check passing","dependencies":[{"issue_id":"agent-shepherd-zhj.5","depends_on_id":"agent-shepherd-zhj","type":"parent-child","created_at":"2026-01-05T17:27:03.983358+01:00","created_by":"daemon"},{"issue_id":"agent-shepherd-zhj.5","depends_on_id":"agent-shepherd-zhj.4","type":"blocks","created_at":"2026-01-05T17:28:53.043691+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-zhj.5.1","title":"5.2 Update getEligibleIssues to filter by label","description":"Modify getEligibleIssues in WorkerEngine to filter out issues with ashep-excluded label (replacing text-based filtering).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T17:28:08.35426+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T03:34:11.30615+01:00","closed_at":"2026-01-06T03:34:11.30615+01:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-shepherd-zhj.5.1","depends_on_id":"agent-shepherd-zhj.5","type":"parent-child","created_at":"2026-01-05T17:28:08.369682+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-zhj.6","title":"Phase 6: Documentation and Integration Tests","description":"Update all documentation and write end-to-end tests.\n\n**Tasks:**\n6.1 Update docs/policies-config.md with trigger system\n6.2 Remove deprecated trigger fields from documentation\n6.3 Update docs/config-config.md with workflow and hitl sections\n6.4 Update docs/architecture.md with label system\n6.5 Update README.md with label usage examples\n6.6 Write integration tests for full workflow\n6.7 Update AGENTS.md with new label conventions\n\n**Files:**\n- docs/policies-config.md (+150/-20 lines)\n- docs/config-config.md (+100/-10 lines)\n- docs/architecture.md (+50/-10 lines)\n- README.md (+80 lines)\n- AGENTS.md (+30 lines)\n- tests/integration/label-workflow.test.ts (new file, +200 lines)\n\n**Effort:** ~5 hours | **Risk:** Low\n\n**Dependencies:** Phase 5\n\n**Acceptance Criteria:**\n- [ ] docs/policies-config.md documents trigger system\n- [ ] Deprecated trigger fields removed or marked as deprecated\n- [ ] docs/config-config.md documents workflow section\n- [ ] docs/config-config.md documents hitl section\n- [ ] docs/architecture.md shows label-based workflow\n- [ ] README.md has label usage examples\n- [ ] AGENTS.md documents label conventions\n- [ ] Integration tests cover full workflow scenarios\n- [ ] Integration tests cover exclusion control\n- [ ] Integration tests cover invalid workflow handling\n- [ ] All tests passing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T17:27:10.763617+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:36:33.000466+01:00","closed_at":"2026-01-06T04:36:33.000466+01:00","close_reason":"Phase 6 completed: All documentation updated and integration tests passing.","dependencies":[{"issue_id":"agent-shepherd-zhj.6","depends_on_id":"agent-shepherd-zhj","type":"parent-child","created_at":"2026-01-05T17:27:10.770932+01:00","created_by":"daemon"},{"issue_id":"agent-shepherd-zhj.6","depends_on_id":"agent-shepherd-zhj.5","type":"blocks","created_at":"2026-01-05T17:28:53.033622+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-zhj.6.1","title":"6.4 Update docs/config-config.md with hitl section","description":"Add HITL configuration section documentation to docs/config-config.md explaining allowed_reasons configuration and validation options.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T17:28:14.106853+01:00","created_by":"tonyhartmann","updated_at":"2026-01-05T17:28:14.106853+01:00","dependencies":[{"issue_id":"agent-shepherd-zhj.6.1","depends_on_id":"agent-shepherd-zhj.6","type":"parent-child","created_at":"2026-01-05T17:28:14.121414+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-zhj.6.3","title":"6.5 Update docs/architecture.md with label system","description":"Update docs/architecture.md to describe the new label-based workflow orchestration system and its integration with Beads.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T17:28:19.999578+01:00","created_by":"tonyhartmann","updated_at":"2026-01-05T17:28:19.999578+01:00","dependencies":[{"issue_id":"agent-shepherd-zhj.6.3","depends_on_id":"agent-shepherd-zhj.6","type":"parent-child","created_at":"2026-01-05T17:28:20.025882+01:00","created_by":"daemon"}]}
{"id":"agent-shepherd-zj4o","title":"label-workflow-test: Phase label remove test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:57:12.990484+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:57:13.150444+01:00","deleted_at":"2026-01-06T15:57:13.150444+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-zkc","title":"Build Agent Shepherd Orchestration System","description":"The current agent ecosystem lacks effective orchestration for multi-step workflows, policy enforcement, and human-in-the-loop coordination. Agent Shepherd fills this gap by providing a production-ready TypeScript/Bun project that orchestrates AI coding agents across Beads issues, using OpenCode as the execution environment, enabling safe, explainable, and autonomous software development.\n\n**Reference Documentation**: See @urls.md for authoritative links to Beads, OpenCode, OpenSpec, BMAD Method, ReactFlow, and architectural inspiration from Steve Yegge's articles on agent autonomy and multi-step development.\n\n- Add full CLI interface with commands for worker, monitor, work, init, install, sync-agents, ui\n- Implement Worker Engine to pull from Beads and launch agents in OpenCode sessions\n- Add Monitor Engine for supervision, timeout detection, and HITL handling\n- Create Policy Engine for workflow phase transitions and retries\n- Build Agent Registry with capability-based agent selection\n- Integrate logging with JSONL and SQLite dual storage like Beads\n- Add OpenCode integration using @opencode-ai/sdk for session management\n- Implement Beads integration via shell commands for issue management\n- Develop minimal ReactFlow-based UI for flow visualization\n- Include installer and init commands with default configs","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:08:55.459449+01:00","updated_at":"2025-12-20T04:52:42.934476+01:00","closed_at":"2025-12-20T04:52:42.934476+01:00","close_reason":"Closed"}
{"id":"agent-shepherd-zkc.1","title":"1. Project Setup","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:09:00.638344+01:00","updated_at":"2025-12-20T03:22:52.613069+01:00","closed_at":"2025-12-20T03:22:52.613072+01:00","dependencies":[{"issue_id":"agent-shepherd-zkc.1","depends_on_id":"agent-shepherd-zkc","type":"parent-child","created_at":"2025-12-19T04:09:00.639092+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.1.1","title":"1.1 Create package.json with Bun, TypeScript, dependencies (@opencode-ai/sdk, react, reactflow, etc.)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:09:05.798752+01:00","updated_at":"2025-12-20T03:21:46.661272+01:00","closed_at":"2025-12-20T03:21:46.661288+01:00","dependencies":[{"issue_id":"agent-shepherd-zkc.1.1","depends_on_id":"agent-shepherd-zkc.1","type":"parent-child","created_at":"2025-12-19T04:09:05.800528+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.1.2","title":"1.2 Create tsconfig.json and bunfig.toml","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:09:10.960841+01:00","updated_at":"2025-12-20T03:22:11.345351+01:00","closed_at":"2025-12-20T03:22:11.345364+01:00","dependencies":[{"issue_id":"agent-shepherd-zkc.1.2","depends_on_id":"agent-shepherd-zkc.1","type":"parent-child","created_at":"2025-12-19T04:09:10.961557+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.1.3","title":"1.3 Set up directory structure (src/cli, src/core, src/utils, .agent-shepherd, docs, schemas, ui)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:09:16.119436+01:00","updated_at":"2025-12-20T03:22:31.861087+01:00","closed_at":"2025-12-20T03:22:31.861102+01:00","dependencies":[{"issue_id":"agent-shepherd-zkc.1.3","depends_on_id":"agent-shepherd-zkc.1","type":"parent-child","created_at":"2025-12-19T04:09:16.120257+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.1.4","title":"1.4 Initialize git repo if not present","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:09:21.276527+01:00","updated_at":"2025-12-20T03:22:47.420668+01:00","closed_at":"2025-12-20T03:22:47.420671+01:00","dependencies":[{"issue_id":"agent-shepherd-zkc.1.4","depends_on_id":"agent-shepherd-zkc.1","type":"parent-child","created_at":"2025-12-19T04:09:21.277268+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.2","title":"2. Core Modules","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:09:26.439505+01:00","updated_at":"2025-12-20T03:40:04.541689+01:00","closed_at":"2025-12-20T03:40:04.541695+01:00","dependencies":[{"issue_id":"agent-shepherd-zkc.2","depends_on_id":"agent-shepherd-zkc","type":"parent-child","created_at":"2025-12-19T04:09:26.440864+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.2.1","title":"2.1 Implement Beads integration (shell commands, issue parsing)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:09:31.63218+01:00","updated_at":"2025-12-20T03:26:24.821954+01:00","closed_at":"2025-12-20T03:26:24.821969+01:00","dependencies":[{"issue_id":"agent-shepherd-zkc.2.1","depends_on_id":"agent-shepherd-zkc.2","type":"parent-child","created_at":"2025-12-19T04:09:31.632898+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.2.2","title":"2.2 Implement OpenCode integration (@opencode-ai/sdk, sessions, messages)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:09:36.788732+01:00","updated_at":"2025-12-20T03:32:32.980554+01:00","closed_at":"2025-12-20T03:32:32.980569+01:00","dependencies":[{"issue_id":"agent-shepherd-zkc.2.2","depends_on_id":"agent-shepherd-zkc.2","type":"parent-child","created_at":"2025-12-19T04:09:36.789375+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.2.3","title":"2.3 Implement Policy Engine (YAML parsing, phase transitions)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:09:41.935739+01:00","updated_at":"2025-12-20T03:37:45.113358+01:00","closed_at":"2025-12-20T03:37:45.113383+01:00","dependencies":[{"issue_id":"agent-shepherd-zkc.2.3","depends_on_id":"agent-shepherd-zkc.2","type":"parent-child","created_at":"2025-12-19T04:09:41.936527+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.2.4","title":"2.4 Implement Agent Registry (YAML loading, capability matching)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:09:47.087352+01:00","updated_at":"2025-12-20T03:38:46.282+01:00","closed_at":"2025-12-20T03:38:46.282013+01:00","dependencies":[{"issue_id":"agent-shepherd-zkc.2.4","depends_on_id":"agent-shepherd-zkc.2","type":"parent-child","created_at":"2025-12-19T04:09:47.087979+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.2.5","title":"2.5 Implement Logging (JSONL + SQLite dual storage)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:09:52.242+01:00","updated_at":"2025-12-20T03:39:59.362041+01:00","closed_at":"2025-12-20T03:39:59.362056+01:00","dependencies":[{"issue_id":"agent-shepherd-zkc.2.5","depends_on_id":"agent-shepherd-zkc.2","type":"parent-child","created_at":"2025-12-19T04:09:52.242811+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.3","title":"3. Engines","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:09:57.408816+01:00","updated_at":"2025-12-20T03:45:54.236904+01:00","closed_at":"2025-12-20T03:45:54.236906+01:00","dependencies":[{"issue_id":"agent-shepherd-zkc.3","depends_on_id":"agent-shepherd-zkc","type":"parent-child","created_at":"2025-12-19T04:09:57.409589+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.3.1","title":"3.1 Implement Worker Engine (ready issues, agent selection, run creation)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:10:02.582721+01:00","updated_at":"2025-12-20T03:43:44.185417+01:00","closed_at":"2025-12-20T03:43:44.185712+01:00","dependencies":[{"issue_id":"agent-shepherd-zkc.3.1","depends_on_id":"agent-shepherd-zkc.3","type":"parent-child","created_at":"2025-12-19T04:10:02.583451+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.3.2","title":"3.2 Implement Monitor Engine (stall detection, HITL handling, timeouts)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:10:07.741749+01:00","updated_at":"2025-12-20T03:44:44.364833+01:00","closed_at":"2025-12-20T03:44:44.364848+01:00","dependencies":[{"issue_id":"agent-shepherd-zkc.3.2","depends_on_id":"agent-shepherd-zkc.3","type":"parent-child","created_at":"2025-12-19T04:10:07.742544+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.3.3","title":"3.3 Implement CLI commands (worker, monitor, work, init, install, sync-agents, ui)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:10:12.902208+01:00","updated_at":"2025-12-20T03:45:49.057219+01:00","closed_at":"2025-12-20T03:45:49.057234+01:00","dependencies":[{"issue_id":"agent-shepherd-zkc.3.3","depends_on_id":"agent-shepherd-zkc.3","type":"parent-child","created_at":"2025-12-19T04:10:12.902963+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.4","title":"4. UI and Installer","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:10:18.054881+01:00","updated_at":"2025-12-20T04:52:10.23356+01:00","closed_at":"2025-12-20T04:52:10.233564+01:00","dependencies":[{"issue_id":"agent-shepherd-zkc.4","depends_on_id":"agent-shepherd-zkc","type":"parent-child","created_at":"2025-12-19T04:10:18.055569+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.4.1","title":"4.1 Create placeholder ReactFlow UI with basic flow visualization","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:10:23.229129+01:00","updated_at":"2025-12-20T04:17:56.635554+01:00","closed_at":"2025-12-20T04:17:56.635569+01:00","dependencies":[{"issue_id":"agent-shepherd-zkc.4.1","depends_on_id":"agent-shepherd-zkc.4","type":"parent-child","created_at":"2025-12-19T04:10:23.23+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.4.2","title":"4.2 Implement UI server with configurable port","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:10:28.384023+01:00","updated_at":"2025-12-20T04:18:17.923676+01:00","closed_at":"2025-12-20T04:18:17.923679+01:00","dependencies":[{"issue_id":"agent-shepherd-zkc.4.2","depends_on_id":"agent-shepherd-zkc.4","type":"parent-child","created_at":"2025-12-19T04:10:28.384702+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.4.3","title":"4.3 Implement installer (check dependencies, suggest installs)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:10:33.588583+01:00","updated_at":"2026-01-05T03:36:29.949185+01:00","closed_at":"2026-01-05T03:36:29.949185+01:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-shepherd-zkc.4.3","depends_on_id":"agent-shepherd-zkc.4","type":"parent-child","created_at":"2025-12-19T04:10:33.589391+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.4.4","title":"4.4 Implement init (create .agent-shepherd with defaults)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:10:38.738923+01:00","updated_at":"2025-12-20T05:09:53.871449+01:00","closed_at":"2025-12-20T05:09:53.871449+01:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-shepherd-zkc.4.4","depends_on_id":"agent-shepherd-zkc.4","type":"parent-child","created_at":"2025-12-19T04:10:38.739595+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.5","title":"5. Configuration and Schemas","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:10:43.891944+01:00","updated_at":"2025-12-20T04:52:18.770819+01:00","closed_at":"2025-12-20T04:52:18.770823+01:00","dependencies":[{"issue_id":"agent-shepherd-zkc.5","depends_on_id":"agent-shepherd-zkc","type":"parent-child","created_at":"2025-12-19T04:10:43.892975+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.5.1","title":"5.1 Create JSON schemas for config, policies, agents, run outcomes","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:10:49.049342+01:00","updated_at":"2025-12-20T04:21:21.587438+01:00","closed_at":"2025-12-20T04:21:21.587452+01:00","dependencies":[{"issue_id":"agent-shepherd-zkc.5.1","depends_on_id":"agent-shepherd-zkc.5","type":"parent-child","created_at":"2025-12-19T04:10:49.049967+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.5.2","title":"5.2 Create default config.yaml, policies.yaml, agents.yaml","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:16:40.408281+01:00","updated_at":"2025-12-20T05:09:53.871212+01:00","closed_at":"2025-12-20T05:09:53.871212+01:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-shepherd-zkc.5.2","depends_on_id":"agent-shepherd-zkc.5","type":"parent-child","created_at":"2025-12-19T04:16:40.409172+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.5.3","title":"5.3 Validate configurations at startup","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:16:45.564711+01:00","updated_at":"2025-12-20T04:24:31.065428+01:00","closed_at":"2025-12-20T04:24:31.065441+01:00","dependencies":[{"issue_id":"agent-shepherd-zkc.5.3","depends_on_id":"agent-shepherd-zkc.5","type":"parent-child","created_at":"2025-12-19T04:16:45.566059+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.6","title":"6. Testing and Validation","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:16:50.71872+01:00","updated_at":"2025-12-20T04:52:26.893017+01:00","closed_at":"2025-12-20T04:52:26.89302+01:00","dependencies":[{"issue_id":"agent-shepherd-zkc.6","depends_on_id":"agent-shepherd-zkc","type":"parent-child","created_at":"2025-12-19T04:16:50.719658+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.6.1","title":"6.1 Add unit tests for core modules","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:16:55.887891+01:00","updated_at":"2025-12-20T04:33:43.131494+01:00","closed_at":"2025-12-20T04:33:43.13151+01:00","dependencies":[{"issue_id":"agent-shepherd-zkc.6.1","depends_on_id":"agent-shepherd-zkc.6","type":"parent-child","created_at":"2025-12-19T04:16:55.88863+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.6.2","title":"6.2 Add integration tests for CLI commands","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:17:01.144705+01:00","updated_at":"2025-12-20T04:36:39.421229+01:00","closed_at":"2025-12-20T04:36:39.421243+01:00","dependencies":[{"issue_id":"agent-shepherd-zkc.6.2","depends_on_id":"agent-shepherd-zkc.6","type":"parent-child","created_at":"2025-12-19T04:17:01.145758+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.6.3","title":"6.3 Validate with linting and type checking","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:17:06.416477+01:00","updated_at":"2025-12-20T04:48:49.912354+01:00","closed_at":"2025-12-20T04:48:49.912368+01:00","dependencies":[{"issue_id":"agent-shepherd-zkc.6.3","depends_on_id":"agent-shepherd-zkc.6","type":"parent-child","created_at":"2025-12-19T04:17:06.417387+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.6.4","title":"6.4 Test end-to-end workflow (mock Beads/OpenCode)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:17:11.686495+01:00","updated_at":"2025-12-20T05:09:53.870971+01:00","closed_at":"2025-12-20T05:09:53.870971+01:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-shepherd-zkc.6.4","depends_on_id":"agent-shepherd-zkc.6","type":"parent-child","created_at":"2025-12-19T04:17:11.687232+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.7","title":"7. Documentation","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:17:16.941347+01:00","updated_at":"2025-12-20T04:52:34.687636+01:00","closed_at":"2025-12-20T04:52:34.68764+01:00","dependencies":[{"issue_id":"agent-shepherd-zkc.7","depends_on_id":"agent-shepherd-zkc","type":"parent-child","created_at":"2025-12-19T04:17:16.942073+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.7.1","title":"7.1 Create README.md with setup and usage","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:17:22.203471+01:00","updated_at":"2025-12-20T05:09:53.8707+01:00","closed_at":"2025-12-20T05:09:53.8707+01:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-shepherd-zkc.7.1","depends_on_id":"agent-shepherd-zkc.7","type":"parent-child","created_at":"2025-12-19T04:17:22.204272+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.7.2","title":"7.2 Expand docs/architecture.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:17:27.488323+01:00","updated_at":"2025-12-20T05:09:53.869952+01:00","closed_at":"2025-12-20T05:09:53.869952+01:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-shepherd-zkc.7.2","depends_on_id":"agent-shepherd-zkc.7","type":"parent-child","created_at":"2025-12-19T04:17:27.489289+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zkc.7.3","title":"7.3 Document CLI commands and configs","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T04:17:32.761881+01:00","updated_at":"2025-12-20T05:09:44.17745+01:00","closed_at":"2025-12-20T05:09:44.17745+01:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-shepherd-zkc.7.3","depends_on_id":"agent-shepherd-zkc.7","type":"parent-child","created_at":"2025-12-19T04:17:32.762762+01:00","created_by":"tonyhartmann"}]}
{"id":"agent-shepherd-zon7","title":"label-workflow-test: Exclusion toggle test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T15:54:01.584276+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T15:54:01.676142+01:00","deleted_at":"2026-01-06T15:54:01.676142+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"agent-shepherd-zt3","title":"label-workflow-test: HITL label set test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-06T04:34:14.02397+01:00","created_by":"tonyhartmann","updated_at":"2026-01-06T04:34:14.104305+01:00","labels":["ashep-hitl:approval"],"deleted_at":"2026-01-06T04:34:14.104305+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
