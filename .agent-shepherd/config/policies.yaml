policies:
  # Simple beginner workflow - works out-of-the-box with basic OpenCode agents
  simple:
    name: simple
    description: Simple autonomous workflow with implement, test, and retry loop
    phases:
      - name: implement
        description: Implement the feature based on issue description
        capabilities:
          - coding
        timeout_multiplier: 2.0
      
      - name: test
        description: Test what was implemented (run and verify it works)
        capabilities:
          - coding
        timeout_multiplier: 1.0
      
      - name: validate
        description: Validate result matches the original issue requirements
        capabilities:
          - coding
        timeout_multiplier: 0.5
    
    retry:
      max_attempts: 2
      backoff_strategy: exponential
      initial_delay_ms: 5000
      max_delay_ms: 30000
    
    timeout_base_ms: 300000
    stall_threshold_ms: 60000
    require_hitl: false

  # Advanced workflow - requires agents with many specialized capabilities
  default:
    name: default
    description: Default workflow policy
    phases:
      - name: plan
        description: Planning and design phase
        capabilities:
          - planning
          - architecture
        timeout_multiplier: 1.0
      
      - name: implement
        description: Implementation phase
        capabilities:
          - coding
          - refactoring
        timeout_multiplier: 2.0
      
      - name: test
        description: Testing phase
        capabilities:
          - coding
        timeout_multiplier: 1.5
      
      - name: review
        description: Code review phase
        capabilities:
          - documentation
        timeout_multiplier: 1.0
        require_approval: true
    
    retry:
      max_attempts: 3
      backoff_strategy: exponential
      initial_delay_ms: 5000
      max_delay_ms: 30000
    
    timeout_base_ms: 300000
    stall_threshold_ms: 60000
    require_hitl: false

  test-1:
    name: test-1
    description: Test workflow policy
    phases:
      - name: implement
        description: Implementation phase
        capabilities:
          - coding
          - refactoring
        timeout_multiplier: 2.0

      - name: test
        description: Testing phase
        capabilities:
          - coding
        timeout_multiplier: 1.5

      - name: review
        description: Code review phase
        capabilities:
          - documentation
        timeout_multiplier: 1.0
        require_approval: true

    retry:
      max_attempts: 3
      backoff_strategy: exponential
      initial_delay_ms: 5000
      max_delay_ms: 300000

default_policy: simple
